<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Lionet Space</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"
    integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous">
    </script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="../css/newsfeed.css">
  <link rel="stylesheet" type="text/css" href="../css/modal.css">
  <link rel="stylesheet" type="text/css" href="../css/notifications.css">
  <!--Fonts-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300&family=Titillium+Web:wght@300&display=swap"
    rel="stylesheet">
</head>

<body class="font-sans bg-yellow-50">
  <!-- Navbar -->
  <nav class="mb-4">
    <div class="bg-blue-lionet mx-4 px-8" style="font-family: 'Titillium Web', sans-serif;">
      <div class="flex items-center py-2 px-10">
        <div class="w-full mx-auto flex items-center">
          <div class="ml-24">
            <img src="/uploads/logo.png" width="50" height="50" />
          </div>
          <div class="ml-4">
            <li class="mt-1 block w-80 border border-gray-300 bg-white focus:outline-none rounded-md shadow-sm text-sm">
              <input type="text" name="search" id="search" placeholder="Suchen"
                class="px-2 py-3 block w-full shadow-sm text-sm border-gray-300 focus:outline-none rounded-md" />
              <ul class="bg-white" id="result"></ul>
            </li>
          </div>
          <div class="ml-4">
            <div id="navbar_items" class="text-sm flex items-center">
              <div>
                <a href="/main" class="no-underline text-black px-6 text-base">Startseite</a>
              </div>
              <div>
                <a href="/myprofile" class="no-underline text-black px-6 text-base">Profil</a>
              </div>
              <div>
                <a href="/spaces" class="no-underline text-black px-6 text-base">Gruppen</a>
              </div>
            </div>
          </div>
          <div class="ml-4 w-full flex justify-end">
            <div class="ml-4">
              <button
                class="m-0 inline-flex justify-center py-2 px-4 border border-transparent 
            shadow-sm text-base font-medium rounded-md text-black bg-blue-lionet border-blue-lionet 
            hover:bg-yellow-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 m-0 float-right"
                id="logoutBtn" onclick="logout();">Logout</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </nav>
  <!-- End of navbar -->

  <!-- Profile Container -->
  <div class="flex">
    <div id="spaceProfileContainer" class="container mx-auto px-4 mt-2 text-base"
      style="font-family: 'Titillium Web', sans-serif;max-width: 85%;">

    </div>
  </div>
  <!-- End of Profile Container -->

  <!-- Post Feed for this space -->
  <div class="flex" id="feedRow">
    <div class="container mx-auto px-4 mt-2 text-base" style="font-family: 'Titillium Web', sans-serif;max-width: 85%;">
      <div class="flex">
        <div class="flex-none w-1/5 p-2 ml-6 mr-2" style="height: 0%"></div>
        <div class="flex-none w-3/5 p ml-7 mr-2" id="feedContainer"></div>
        <div class="flex-none w-1/5 p-2 mr-2" style="height: 0%"></div>
      </div>
    </div>
  </div>
  <!-- End of Post Feed -->

  <!-- Footer -->
  <div class="mt-8" style="font-family: 'Titillium Web', sans-serif;">
    <div class="container mx-auto px-8">
      <div class="px-10">
        <div class="flex items-center justify-between border-t py-8">
          <div class="justify-start justify-between text-xs w-4/5 flex">
            <div class="mr-4 w-24 text-sm">
              &copy; 2021 lionet.
            </div>
            <div class="mr-4 text-sm">
              <a href="#" class="no-underline">Nutzungsbedingungen</a>
            </div>
            <div class="mr-4 text-sm">
              <a href="#" class="no-underline">Datenschutz</a>
            </div>
            <div class="mr-4 text-sm">
              <a href="#" class="no-underline">Sicherheit</a>
            </div>
            <div class="mr-4 text-sm">
              <a href="#" class="no-underline">Hilfe</a>
            </div>

            <div class="justify-end justify-between text-xs w-2/5 flex text-right">
              <div class="ml-4">
                <a href="#" class="no-underline">Über lionet</a>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End of footer -->

  <script id="user_management_entry" type="text/html">
  <tr class="border-b">
    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
      <img class="inline-block h-10 w-10 rounded-full mr-2" src="../uploads/r_glotjtaannjbmdmatfypuyl913y_rnoylh2lcmpqw_.jpg" alt="SpaceFoto">
      <a href="../profile/{{!username}}">
        {{!username}}
      </a>
    </td>
    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
      <div class="flex">
        <p class="w-5/6 {{!^isInvite}}{{!#isAdmin}}font-bold text-green-700{{!/isAdmin}}{{!^isAdmin}}font-bold text-red-500{{!/isAdmin}}{{!/isInvite}}">{{!role}}</p>
        <div class="w-1/6">
          {{!^isInvite}}
            {{!#isAdmin}}
            <span data-bs-toggle="tooltip" data-bs-html="true" title="Entziehe diesem User den Admin-Status!" onclick="javascript:removeAdmin('{{!spacename}}', '{{!username}}')">
              <svg xmlns="http://www.w3.org/2000/svg" class="inline-block h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 13l-3 3m0 0l-3-3m3 3V8m0 13a9 9 0 110-18 9 9 0 010 18z" />
              </svg>
            </span>
            {{!/isAdmin}}
            {{!^isAdmin}}
            <span data-bs-toggle="tooltip" title="Füge diesen User als Space-Admin hinzu!" onclick="javascript:addAdmin('{{!spacename}}', '{{!username}}')">
              <svg xmlns="http://www.w3.org/2000/svg" class="inline-block h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z" />
              </svg>
            </span>
            {{!/isAdmin}}          
            <span data-bs-toggle="tooltip" title="Entferne diesen User aus dem Space!"  onclick="javascript:kick('{{!spacename}}', '{{!username}}')">
              <svg xmlns="http://www.w3.org/2000/svg" class="inline-block ml-1 h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </span>
          {{!/isInvite}}
        </div> 
      </div>
    </td>
  </tr>
</script>

  <script id="add_user_user_management" type="text/html">
  <tr class="border-b">
    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    </td>
    <td></td>
  </tr>
</script>

  <script id="space_join_request_template" type="text/html">
  <div id="join_request_{{!username}}" class="flex justify-center">
    <ul class="bg-white rounded-lg text-gray-900">
      <li class="w-full bg-white border rounded-md shadow-sm block border-gray-300 mb-2">
        <div class="grid grid-cols-6 gap-2 block p-6 rounded-lg shadow-lg bg-white">
          <a href="../profile/{{!username}}">
            <div class="flex col-span-1">
              <img class="inline-block h-10 w-10 rounded-full mr-2" src="../uploads/r_glotjtaannjbmdmatfypuyl913y_rnoylh2lcmpqw_.jpg" alt="SpaceFoto">
              <p class="mt-2">{{!username}}</p>
            </div>
          </a>
          <div class="col-span-3">
            
          </div>
          <div class="col-span-1">
            <button onclick="javascript:acceptJoinRequest('{{!spacename}}', '{{!username}}')" type="button" onclick="" class="inline-block px-6 py-2.5 bg-green-600 text-black font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out">Akzeptieren</button>
          </div>
          <div class="col-span-1">
            <button onclick="javascript:declineJoinRequest('{{!spacename}}', '{{!username}}')" type="button" onclick="" class="inline-block px-6 py-2.5 bg-red-600 text-black font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out">Ablehnen</button>
          </div>
        </div>
      </li>
    </ul>
  </div>
</script>

  <script id="invite_profile_card" type="text/html">
  <div class="flex justify-center">
    <ul class="bg-white rounded-lg text-gray-900">
      <li class="w-full bg-white border rounded-md shadow-sm block border-gray-300 mb-2">
        <div class="grid grid-cols-5 gap-2 block p-6 rounded-lg shadow-lg bg-white">
          <div class="flex col-span-1">
            <img class="inline-block h-10 w-10 rounded-full mr-2" src="../uploads/r_glotjtaannjbmdmatfypuyl913y_rnoylh2lcmpqw_.jpg" alt="SpaceFoto">
            <p class="mt-2">{{!username}}</p>
          </div>
          <div class="col-span-3">

          </div>
          <div class="col-span-1">
            <button onclick="javascript:sendInvitation('{{!spacename}}', '{{!username}}')" type="button" onclick="" class="inline-block px-6 py-2.5 bg-green-600 text-black font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out">Einladen</button>
          </div>
        </div>
      </li>
    </ul>
  </div>
</script>

  <script id="user_invite_card" type="text/html">
  <div class="flex grid grid-rows-3 grid-cols-3 gap-4 border rounded-md shadow-sm block border-gray-300 mb-2">
    <div class="flex row-span-3">
      <img class="w-10 h-10 inline-block rounded-full mx-auto my-auto" src="../uploads/r_glotjtaannjbmdmatfypuyl913y_rnoylh2lcmpqw_.jpg" alt="SpaceFoto">
    </div>
    <div class="col-span-2">
      <p class="mt-2 text-base font-bold">{{!user.username}}</p>
    </div>
    <div class="row-span-1 col-span-2">
      {{!user.email}}
    </div>
    <div class="row-span-1 col-span-1"></div>
    <div class="row-span-1 col-span-1">
      <button id="invitation_btn_{{!user.username}}" type="button" onclick="javascript:sendInvitation('{{!spacename}}','{{!user.username}}')" class="inline-block px-6 py-2 bg-green-600 text-black font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out">Einladen</button>
    </div>
  </div>
</script>

  <script id="space_member" type="text/html">
  <div class="flex flex-col items-center pb-10" >
    <p>
      <img class="mb-3 w-12 h-12 mx-auto rounded-full shadow-lg" src="../uploads/{{!profilePic}}"/>
      <a href="../profile/{{!username}}" class="mb-1 text-xl font-medium text-gray-900 dark:text-black">{{!username}}</a>
      <p class="text-sm text-center text-green-600">{{!memberRole}}

      </p>
    </p>
  </div>
</script>

  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/2.3.0/alpine.js"
    integrity="sha512-nIwdJlD5/vHj23CbO2iHCXtsqzdTTx3e3uAmpTm4x2Y8xCIFyWu4cSIV8GaGe2UNVq86/1h9EgUZy7tn243qdA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="../javascripts/mustache.js"></script>

  <script src="../javascripts/general_utility.js"></script>
  <script src="../javascripts/user_utility.js"></script>
  <script src="../javascripts/space_utility.js"></script>

  <script src="../javascripts/newsfeed.js"></script>
  <script src="../javascripts/space.js"></script>
  <script src="../javascripts/notifications.js"></script>

  <script>
    /**
     * Setup function for tab system
     */
    function setup() {
      return {
        activeTab: 0,
        tabs: [
          "Dashboard",
          "Team",
          //"Dokumente",
        ]
      };
    };

    /**
     * Setup function for tab system in space administration 
     */
    function setupSpaceAdministrationTabs() {
      return {
        activeTab: 0,
        tabs: [
          "User Management",
          "Anfragen",
          "Einladungen"
        ]
      }
    }

    /**
     * Function to preview uploaded image in update space modal
     */
    function showImage() {
      return {
        showPreview(event) {
          if (event.target.files.length > 0) {
            var src = URL.createObjectURL(event.target.files[0]);
            var preview = document.getElementById("preview");
            preview.src = src;
            preview.style.display = "block";
          }
        }
      }
    }
  </script>
</body>

</html>