<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Social Network</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"
            integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ"
            crossorigin="anonymous">
    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css">
    <!---<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">-->
    <!---<link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">-->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/newsfeed.css">
    <link rel="stylesheet" href="../css/tagsinput.css">
    <link rel="stylesheet" type="text/css" href="../css/modal.css">
    <link rel="stylesheet" type="text/css" href="../css/notifications.css">

    
</head>
<body class="font-sans bg-white">

<!--
Create new route/handler for this html
then use $.get("...html") to get the templates in this file
Maybe converting to .htm and dont use <html>, <body> and <head> tags-->

<script id="newPostTemplate" type="text/html">
    <div class="flex">
        <div class="w-1/4">
            <div class="flex">
                <div class="w-1/2">
                    <div class="mb-4" id="profileImage">
                        <img src="{{!profile_pic_URL}}" class="img-circle avatar" alt="user profile image" width="100"
                             height="100">
                    </div>
                </div>
                <div class="w-1/2">
                    <div class="mb-4" id="profileFullName">
                        <div class="text-3xl font-medium text-grey-darkest">
                            Name?
                        </div>
                    </div>
                    <div class="mb-4" id="profileUsername">
                        <div class="text-xl text-grey-dark font-light">
                            {{!username}}
                        </div>

                    </div>
                </div>
            </div>
            <div class="pb-6 border-b"></div>
        </div>
        <div class="w-3/4 ml-6 mt-2">
            <div class="panel panel-white post" id="newPostPanel">

                <div class="post-heading">
                    <div class="float-left image">
                        <img src="{{!profile_pic_URL}}" class="img-circle avatar" alt="user profile image">
                    </div>
                    <div class="float-left meta">
                        <h2>
                            <b>Hello {{!username}}</b>
                        </h2>
                    </div>
                </div>

                <div class="post-description">
                    <textarea class="form-textarea mt-1 block w-full border rounded-md" id="postFeed" rows="2"
                              placeholder="What are you thinking?"></textarea>
                    <div class="post-description" style="padding-top: 5px;">
                        <div id="postAlert"></div>
                        <div class="grid grid-cols-2 gap-4">
                            <!---                        <div class="flex-1">
                                                        <input type="text" value="" id="addTag" data-role="tagsinput" placeholder="Add Tags">
                                                    </div>
                                                    -->
                            <div class="flex-1">
                                <select id="selectSpace" class="custom-select">
                                    <option value=null selected disabled>Post into Space..</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div id="postdiv" class="mar-top clearfix p-2">
                        <button class="m-0 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-300 hover:bg-indigo-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 m-0 float-right" id="post"><i class="fa fa-pencil fa-fw"></i>
                            Post
                        </button>
                        <!--<div class="element">
                          <i class="fa fa-file"></i>
                          <button class="btn btn-sm btn-success" id="record"><i class="fa fa-microphone"></i></button>
                          <input type="file" name="files" id="files" multiple>
                        </div>-->
                        <div class="rounded">

                            <button id="record"
                                    class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-300 hover:bg-indigo-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 btn btn-success">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                     stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                          d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
                                </svg>
                            </button>
                            <button type="button"
                                    class="inline-flex items-center py-2 px-4 border border-transparent rounded-full shadow-sm text-whitebg-indigo-300 hover:bg-indigo-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 btn">
                                <!-- Heroicon name: solid/plus -->
                                <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                     fill="currentColor" aria-hidden="true">
                                    <path fill-rule="evenodd"
                                          d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"
                                          clip-rule="evenodd"/>
                                    <input type='file' name="files" id="files" multiple class="hidden"/>
                                </svg>
                            </button>
                            <p>
                                <audio id=recordedAudio></audio>
                            </p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</script>

<script id="postTemplate" type="text/html">
    <div class="border w-full shadow-sm block focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border-gray-300 rounded-md p-2 mb-2 post" id={{!_id}} name={{!creation_date}}>
        <div class="post-heading border-b">
            <div class="float-left image">
                <img src="{{!authorPicURL}}" class="img-circle avatar" alt="user profile image">
            </div>
            <div class="float-left meta">
                <div class="title h5">
                    <a href="profile/{{!author.username}}"><b>{{!author.username}}</b></a>
                    made a post.
                    {{!#hasSpace}}
                    <b>></b>
                    <span class="label label-pill label-primary">{{!space}}</span>
                    {{!/hasSpace}}
                </div>
                <h6 class="text-muted time" id="agoPost">{{!ago}}</h6>
            </div>
            <div class="float-right">
                {{!#isAuthor}}
                <div class="relative" x-data="{isOpen: false}">
                  <button
                          @click="isOpen = !isOpen"
                          @keydown.escape="isOpen = false"
                          class="flex items-center"
                  ><div class="dot" id="moreOptionMenu" data-toggle="dropdown" aria-haspopup="true"
                       aria-expanded="false"></div></button>
                  <div x-show="isOpen"
                      @click.away="isOpen = false"
                      class="origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"
                      >
                      <a class="block w-full" href="javascript:deletePost('{{!_id}}');">Delete</a>
                    </div>
                </div>
                {{!/isAuthor}}
            </div>
        </div>
        <div class="post-description">
            <div class="border p-4 mb-4 rounded">
                <p>{{!text}}</p>
            </div>

            {{!#hasMedia}}
            <div id="{{!_id}}" class="carousel slide">
                {{!#multipleMedia}}
                <ol class="carousel-indicators">
                    <li data-slide-to="0" class="active"></li>
                    {{!#fileMediaCountTail}}
                    <li data-slide-to="{{!.}}"></li>
                    {{!/fileMediaCountTail}}
                </ol>
                {{!/multipleMedia}}
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        {{!#firstMediaIsImage}}
                        <img class="d-block w-100" src="{{!firstMediaURL}}" alt="post image">
                        {{!/firstMediaIsImage}}
                        {{!^firstMediaIsImage}}
                        <video width="100%" height="100%" autostart="false" controls>
                            <source src="{{!firstMediaURL}}">
                            Your browser does not support the video tag.
                        </video>
                        {{!/firstMediaIsImage}}
                    </div>
                    {{!#tailVideosURL}}
                    <div class="carousel-item">
                        <video width="100%" height="100%" autostart="false" controls>
                            <source src="{{!.}}">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    {{!/tailVideosURL}}

                    {{!#tailImagesURL}}
                    <div class="carousel-item">
                        <img class="d-block w-100" src="{{!.}}" alt="post image">
                    </div>
                    {{!/tailImagesURL}}

                </div>
                {{!#multipleMedia}}
                <a class="carousel-control-prev" href="javascript:previousSlide('{{!_id}}');" type="button">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                </a>
                <a class="carousel-control-next" href="javascript:nextSlide('{{!_id}}');" type="button">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                </a>
                {{!/multipleMedia}}
            </div>
            {{!/hasMedia}}
            {{!#audiosURL}}
            <p>
                <audio id=voiceInput src={{!.}} controls=true autostart="false"></audio>
            </p>
            {{!/audiosURL}}
            {{!#otherfiles}}
            <i class="fa fa-download"></i> <a href="{{!path}}" download>{{!name}}</a>
            {{!/otherfiles}}

            <div class="stats">
                <button type="button" onclick="likeDislike(this,'{{!_id}}');" id="likers"
                        class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded" data-toggle="tooltip" data-placement="right" data-html="true"
                        data-original-title="{{!#likers}}<li>{{!.}}</li>{{!/likers}}">
                    <i id="likeIcon" class="fa fa-thumbs-up"></i> <span id="likeCounter">{{!likes}}</span>
                </button>
                <!--<p class="d-inline"> Likes: <span id="likeCounter">{{!likes}}</span></p>-->
                <button class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded" type="button" id="shareBtn" data-toggle="modal"
                        aria-haspopup="true" aria-expanded="false" onclick="loadSpacesRepost('{{!_id}}');" data-target="#shareModal{{!_id}}">
                    <i id="shareIcon" class="fa fa-share"></i>
                </button>
                <!--<div class="dropdown-menu inline-block" aria-labelledby="shareBtn">
                    <button class="dropdown-item" data-toggle="modal" onclick="loadSpacesRepost('{{!_id}}');"
                            data-target="#shareModal{{!_id}}">Share...
                    </button>
                </div>-->

                <!--<div class="relative inline-block" x-data="{isOpen: false}">
                  <button
                          id="shareBtn"
                          @click="isOpen = !isOpen"
                          @keydown.escape="isOpen = false"
                          class="flex items-center"
                  ><i id="shareIcon" class="fa fa-share"></i></button>
                  <div x-show="isOpen"
                      @click.away="isOpen = false"
                      class="origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"
                      >
                      <div class="dropdown-menu" aria-labelledby="shareBtn">
                          <button class="dropdown-item" data-toggle="modal" onclick="loadSpacesRepost('{{!_id}}');"
                                  data-target="#shareModal{{!_id}}">Share...
                          </button>
                      </div>
                    </div>
                </div>-->

                <!-- Modal -->
                <div id="shareModal{{!_id}}" class="modal modal-message modal-info" style="display: none;"
                     aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <i class="fa fa-envelope"></i>
                            </div>
                            <div class="modal-title"></div>

                            <div class="modal-body">
                                <select id="selectRepostSpace{{!_id}}" class="custom-select">
                                    <option value=null>Share into your timeline</option>

                                </select>
                                <textarea class="form-control" id="shareText{{!_id}}" rows="2"
                                          placeholder="What are your thoughts?"></textarea>

                                <div class="panel panel-default">
                                    <div class="post-heading">

                                        <div class="title h5">
                                            <a><b>{{!author.username}}</b></a>
                                            made a post.
                                            {{!#hasSpace}}
                                            <b>></b>
                                            <span class="label label-pill label-primary">{{!space}}</span>
                                            {{!/hasSpace}}
                                        </div>
                                        <h6 class="text-muted time" id="agoPost">{{!ago}}</h6>

                                    </div>

                                    <div class="post-description">
                                        <p>{{!text}}</p>

                                        {{!#hasMedia}}
                                        <div id="{{!_id}}" class="carousel slide">
                                            {{!#multipleMedia}}
                                            <ol class="carousel-indicators">
                                                <li data-slide-to="0" class="active"></li>
                                                {{!#fileMediaCountTail}}
                                                <li data-slide-to="{{!.}}"></li>
                                                {{!/fileMediaCountTail}}
                                            </ol>
                                            {{!/multipleMedia}}
                                            <div class="carousel-inner">
                                                <div class="carousel-item active">
                                                    {{!#firstMediaIsImage}}
                                                    <img class="d-block w-100" src="{{!firstMediaURL}}"
                                                         alt="post image">
                                                    {{!/firstMediaIsImage}}
                                                    {{!^firstMediaIsImage}}
                                                    <video width="100%" height="100%" autostart="false" controls>
                                                        <source src="{{!firstMediaURL}}">
                                                        Your browser does not support the video tag.
                                                    </video>
                                                    {{!/firstMediaIsImage}}
                                                </div>
                                                {{!#tailVideosURL}}
                                                <div class="carousel-item">
                                                    <video width="100%" height="100%" autostart="false" controls>
                                                        <source src="{{!.}}">
                                                        Your browser does not support the video tag.
                                                    </video>
                                                </div>
                                                {{!/tailVideosURL}}

                                                {{!#tailImagesURL}}
                                                <div class="carousel-item">
                                                    <img class="d-block w-100" src="{{!.}}" alt="post image">
                                                </div>
                                                {{!/tailImagesURL}}

                                            </div>
                                            {{!#multipleMedia}}
                                            <a class="carousel-control-prev"
                                               href="javascript:previousSlide('{{!_id}}');" type="button">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            </a>
                                            <a class="carousel-control-next" href="javascript:nextSlide('{{!_id}}');"
                                               type="button">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            </a>
                                            {{!/multipleMedia}}
                                        </div>
                                        {{!/hasMedia}}
                                        {{!#audiosURL}}
                                        <p>
                                            <audio id=voiceInput src={{!.}} controls=true autostart="false"></audio>
                                        </p>
                                        {{!/audiosURL}}
                                        {{!#otherfiles}}
                                        <i class="fa fa-download"></i> <a href="{{!path}}" download>{{!name}}</a>
                                        {{!/otherfiles}}
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" id="repost" onclick="javascript:repost('{{!_id}}');"
                                            class="btn btn-info" data-dismiss="modal">Post
                                    </button>
                                </div>
                            </div> <!-- / .modal-content -->
                        </div> <!-- / .modal-dialog -->
                    </div>
                </div>
            </div>
        </div>
        <div class="post-footer w-full">
            <div class="input-group flex" id="commentBox">
                <input class="form-control mt-1 block w-full border rounded-md flex-1" id="commentInput" placeholder="Add a comment" type="text">
                <span class="p-1">
                  <a href="javascript:void(0);"><i class="fa fa-edit" id="postComment"></i></a>
                </span>
            </div>
            <ul class="comments-list">
            </ul>
        </div>
    </div>
</script>

<script id="repostTemplate" type="text/html">
    <div class="panel panel-default border w-full shadow-sm block focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border-gray-300 rounded-md p-2 post" id={{!_id}} name={{!creation_date}}>
        <div class="post-heading border-b">
            <div class="float-left image">
                <img src="{{!repostAuthorPicURL}}" class="img-circle avatar" alt="user profile image">
            </div>
            <div class="float-left meta">
                <div class="title h5">
                    <a href="profile/{{!repostAuthor}}"><b>{{!repostAuthor}}</b></a>
                    shared a post.
                    {{!#hasSpace}}
                    <b>></b>
                    <span class="label label-pill label-primary">{{!space}}</span>
                    {{!/hasSpace}}
                </div>
                <h6 class="text-muted time" id="agoPost">{{!ago}}</h6>
            </div>
            <div class="float-right">
                {{!#isRepostAuthor}}
                <div class="relative" x-data="{isOpen: false}">
                  <button
                          @click="isOpen = !isOpen"
                          @keydown.escape="isOpen = false"
                          class="flex items-center"
                  ><div class="dot" id="moreOptionMenu" data-toggle="dropdown" aria-haspopup="true"
                       aria-expanded="false"></div></button>
                  <div x-show="isOpen"
                      @click.away="isOpen = false"
                      class="origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"
                      >
                      <a class="block w-full" href="javascript:deletePost('{{!_id}}');">Delete</a>
                    </div>
                </div>
                {{!/isRepostAuthor}}
            </div>
        </div>
        <div class="post-description">
            <p>{{!repostText}}</p>


            <div class="border w-full shadow-sm block focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border-gray-300 rounded-md p-2">
                <div class="post-heading border-b">
                    <div class="float-left image">
                        <img src="{{!authorPicURL}}" class="img-circle avatar" alt="user profile image">
                    </div>
                    <div class="float-left meta">
                        <div class="title h5">
                            <a href="profile/{{!author.username}}"><b>{{!author.username}}</b></a>
                            made a post.
                            {{!^isRepost}}
                            {{!#hasSpace}}
                            <b>></b>
                            <span class="label label-pill label-primary">{{!space}}</span>
                            {{!/hasSpace}}
                            {{!/isRepost}}
                        </div>
                        <h6 class="text-muted time" id="originalAgo">{{!originalAgo}}</h6>
                    </div>
                </div>

                <div class="post-description">
                    <p>{{!text}}</p>

                    {{!#hasMedia}}
                    <div id="{{!_id}}" class="carousel slide">
                        {{!#multipleMedia}}
                        <ol class="carousel-indicators">
                            <li data-slide-to="0" class="active"></li>
                            {{!#fileMediaCountTail}}
                            <li data-slide-to="{{!.}}"></li>
                            {{!/fileMediaCountTail}}
                        </ol>
                        {{!/multipleMedia}}
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                {{!#firstMediaIsImage}}
                                <img class="d-block w-100" src="{{!firstMediaURL}}" alt="post image">
                                {{!/firstMediaIsImage}}
                                {{!^firstMediaIsImage}}
                                <video width="100%" height="100%" autostart="false" controls>
                                    <source src="{{!firstMediaURL}}">
                                    Your browser does not support the video tag.
                                </video>
                                {{!/firstMediaIsImage}}
                            </div>
                            {{!#tailVideosURL}}
                            <div class="carousel-item">
                                <video width="100%" height="100%" autostart="false" controls>
                                    <source src="{{!.}}">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                            {{!/tailVideosURL}}

                            {{!#tailImagesURL}}
                            <div class="carousel-item">
                                <img class="d-block w-100" src="{{!.}}" alt="post image">
                            </div>
                            {{!/tailImagesURL}}

                        </div>
                        {{!#multipleMedia}}
                        <a class="carousel-control-prev" href="javascript:previousSlide('{{!_id}}');" type="button">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        </a>
                        <a class="carousel-control-next" href="javascript:nextSlide('{{!_id}}');" type="button">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        </a>
                        {{!/multipleMedia}}
                    </div>
                    {{!/hasMedia}}
                    {{!#audiosURL}}
                    <p>
                        <audio id=voiceInput src={{!.}} controls=true autostart="false"></audio>
                    </p>
                    {{!/audiosURL}}
                    {{!#otherfiles}}
                    <i class="fa fa-download"></i> <a href="{{!path}}" download>{{!name}}</a>
                    {{!/otherfiles}}
                </div>
            </div>

            <div class="stats">
                <button type="button" onclick="likeDislike(this,'{{!_id}}');" id="likers" class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded"
                        data-toggle="tooltip" data-placement="right" data-html="true"
                        data-original-title="{{!#likers}}<li>{{!.}}</li>{{!/likers}}">
                    <i id="likeIcon" class="fa fa-thumbs-up"></i>
                </button>
                <!--<p> Likes: <span id="likeCounter">{{!likes}}</span></p>-->
                <button class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 pb-2 border border-blue-500 hover:border-transparent rounded" type="button" id="shareBtn" data-toggle="modal"
                        aria-haspopup="true" aria-expanded="false" onclick="loadSpacesRepost('{{!_id}}');" data-target="#shareModal{{!_id}}">
                    <i id="shareIcon" class="fa fa-share"></i>
                </button>
                <!--
                <button class="btn btn-info dropdown-toggle" type="button" id="shareBtn" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                    <i id="shareIcon" class="fa fa-share"></i>
                </button>
                <div class="dropdown-menu" aria-labelledby="shareBtn">
                    <button class="dropdown-item" data-toggle="modal" onclick="loadSpacesRepost('{{!_id}}');"
                            data-target="#shareModal{{!_id}}">Share...
                    </button>
                </div>-->

                <!-- Modal -->
                <div id="shareModal{{!_id}}" class="modal modal-message modal-info" style="display: none;"
                     aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <i class="fa fa-envelope"></i>
                            </div>
                            <div class="modal-title"></div>

                            <div class="modal-body">
                                <select id="selectRepostSpace{{!_id}}" class="custom-select">
                                    <option value=null>Share into your timeline</option>

                                </select>
                                <textarea class="form-control" id="shareText{{!_id}}" rows="2"
                                          placeholder="What are your thoughts?"></textarea>

                                <div class="panel panel-default">
                                    <div class="post-heading">

                                        <div class="title h5">
                                            <a><b>{{!author.username}}</b></a>
                                            made a post.
                                            {{!#hasSpace}}
                                            <b>></b>
                                            <span class="label label-pill label-primary">{{!space}}</span>
                                            {{!/hasSpace}}
                                        </div>
                                        <h6 class="text-muted time" id="originalAgo">{{!originalAgo}}</h6>

                                    </div>

                                    <div class="post-description">
                                        <p>{{!text}}</p>

                                        {{!#hasMedia}}
                                        <div id="{{!_id}}" class="carousel slide">
                                            {{!#multipleMedia}}
                                            <ol class="carousel-indicators">
                                                <li data-slide-to="0" class="active"></li>
                                                {{!#fileMediaCountTail}}
                                                <li data-slide-to="{{!.}}"></li>
                                                {{!/fileMediaCountTail}}
                                            </ol>
                                            {{!/multipleMedia}}
                                            <div class="carousel-inner">
                                                <div class="carousel-item active">
                                                    {{!#firstMediaIsImage}}
                                                    <img class="d-block w-100" src="{{!firstMediaURL}}"
                                                         alt="post image">
                                                    {{!/firstMediaIsImage}}
                                                    {{!^firstMediaIsImage}}
                                                    <video width="100%" height="100%" autostart="false" controls>
                                                        <source src="{{!firstMediaURL}}">
                                                        Your browser does not support the video tag.
                                                    </video>
                                                    {{!/firstMediaIsImage}}
                                                </div>
                                                {{!#tailVideosURL}}
                                                <div class="carousel-item">
                                                    <video width="100%" height="100%" autostart="false" controls>
                                                        <source src="{{!.}}">
                                                        Your browser does not support the video tag.
                                                    </video>
                                                </div>
                                                {{!/tailVideosURL}}

                                                {{!#tailImagesURL}}
                                                <div class="carousel-item">
                                                    <img class="d-block w-100" src="{{!.}}" alt="post image">
                                                </div>
                                                {{!/tailImagesURL}}

                                            </div>
                                            {{!#multipleMedia}}
                                            <a class="carousel-control-prev"
                                               href="javascript:previousSlide('{{!_id}}');" type="button">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            </a>
                                            <a class="carousel-control-next" href="javascript:nextSlide('{{!_id}}');"
                                               type="button">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            </a>
                                            {{!/multipleMedia}}
                                        </div>
                                        {{!/hasMedia}}
                                        {{!#audiosURL}}
                                        <p>
                                            <audio id=voiceInput src={{!.}} controls=true autostart="false"></audio>
                                        </p>
                                        {{!/audiosURL}}
                                        {{!#otherfiles}}
                                        <i class="fa fa-download"></i> <a href="{{!path}}" download>{{!name}}</a>
                                        {{!/otherfiles}}
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" id="repost" onclick="javascript:repost('{{!_id}}');"
                                            class="btn btn-info" data-dismiss="modal">Post
                                    </button>
                                </div>
                            </div> <!-- / .modal-content -->
                        </div> <!-- / .modal-dialog -->
                    </div>
                </div>

                <div class="post-footer w-full">
                    <div class="input-group flex" id="commentBox">
                        <input class="form-control mt-1 block w-full border rounded-md flex-1" id="commentInput" placeholder="Add a comment" type="text">
                        <span class="p-1">
          	              <a href="javascript:void(0);"><i class="fa fa-edit" id="postComment"></i></a>
          	            </span>
                    </div>
                    <ul class="comments-list">
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>

<script id="commentTemplate" type="text/html">
    <li class="comment border w-full shadow-sm block w-full focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border-gray-300 rounded-md p-2" id={{!_id}}>
        <a class="float-left" href="javascript:void(0);">
            <img class="avatar" src="{{!authorPicURL}}" alt="avatar">
        </a>
        <div class="float-right">
            {{!#isCommentAuthor}}
            <div class="dropdown">
                <div class="relative" x-data="{isOpen: false}">
                  <button
                          @click="isOpen = !isOpen"
                          @keydown.escape="isOpen = false"
                          class="flex items-center"
                  ><div class="dot" id="moreOptionMenuComment" data-toggle="dropdown" aria-haspopup="true"
                       aria-expanded="false"></div></button>
                  <div x-show="isOpen"
                      @click.away="isOpen = false"
                      class="origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"
                      >
                      <a class="block w-full" href="javascript:deleteComment('{{!_id}}')">Delete</a>
                    </div>
                </div>
            </div>
            {{!/isCommentAuthor}}
        </div>
        <div class="comment-body">
            <div class="comment-heading">
                <a href="profile/{{!author.username}}"><h4 class="user">{{!author.username}}</h4></a>
                <h5 class="time" id="agoComment">{{!ago}}</h5>
            </div>
            <p>{{!text}}</p>
        </div>
    </li>
</script>

<script id="tagTemplate" type="text/html">
    <!--<span class="inline-block border border-blue rounded py-1 px-3 bg-blue text-white">{{!text}}</span>-->
</script>

<script id=spaceTemplate type="text/html">

  <a class="dropdown-item block w-full hover:bg-gray-200" id={{!_id}} href="space/{{!name}}">{{!name}} {{!^inSpace}}
      <button type="button" id="joinSpace" name={{!name}} class="btn btn-outline-success">Join</button>
      {{!/inSpace}}</a>
</script>

<script id="spaceTemplateSelect" type="text/html">
    <option value={{!name}}>{{!name}}</option>
</script>

<script id="profileTemplate" type="text/html">
    <div class="panel panel-white profile-widget" id="profilePanel">
        <div class="row">
            <div class="col-sm-12">
                <div class="image-container bg2" style="background:url(https://via.placeholder.com/400x200)">
                    <img src={{!profile_pic_URL}} class="avatar" alt="avatar">
                </div>
            </div>
            <div class="col-sm-12">
                <div class="details">
                    <h4>{{!username}}<i class="fa fa-sheild"></i></h4>
                    <div>{{!email}}</div>
                    <div class="mg-top-10">
                        {{!#isFollowed}}
                        <a href="javascript:deleteFollow('{{!username}}');" class="btn btn-danger">Unfollow</a>
                        {{!/isFollowed}}
                        {{!^isFollowed}}
                        <a href="javascript:postFollow('{{!username}}');" class="btn btn-warning">Follow</a>
                        {{!/isFollowed}}
                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#followModal">
                            Follows ({{!followSize}})
                        </button>
                    </div>

                    <!-- Modal -->
                    <div class="modal" id="followModal" tabindex="-1" role="dialog" aria-labelledby="followModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="followModalLabel">Follows</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <ul class="list-group">
                                        {{!#follows}}
                                        <li class="list-group-item">{{!.}}</li>
                                        {{!/follows}}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<script id="spaceHeaderTemplate1" type="text/html">
    <div class="panel panel-white profile-widget" id="spaceProfilePanel">
        <div class="row">
            <div class="col-sm-12">
                <div class="image-container bg2" style="background:url(https://via.placeholder.com/400x200)">
                    <img src="https://via.placeholder.com/400x200" class="avatar" alt="avatar">
                </div>
            </div>
            <div class="col-sm-12">
                <div class="details">
                    <h1>{{!spacename}}<i class="fa fa-sheild"></i></h1>
                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-info" data-toggle="modal" data-target="#memberModal">
                        Members ({{!memberSize}})
                    </button>

                    <!-- Modal -->
                    <div class="modal" id="memberModal" tabindex="-1" role="dialog" aria-labelledby="memberModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="memberModalLabel">Members</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <ul class="list-group">
                                        {{!#members}}
                                        <li class="list-group-item">{{!.}}</li>
                                        {{!/members}}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>Description of Space</div>
                    <div>This is a cool Space.</div>
                    <div class="mg-top-10">
                        <a href='#' class="btn btn-primary">Invite</a>
                        <a href='#' class="btn btn-danger">Leave</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>
<script id="spaceHeaderTemplate" type="text/html">
  <div class="panel panel-default border w-full shadow-sm block focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border-gray-300 rounded-md p-2 profile-widget" id="spaceProfilePanel">
    <div class="flex items-center py-2">
      <div>
        <div class="image-container bg2" style="background:url(https://via.placeholder.com/100x100)">
            <img src="https://via.placeholder.com/100x100" class="avatar" alt="avatar">
        </div>

        <div class="details">
          <h1>{{!spacename}}<i class="fa fa-sheild"></i></h1>
          <!-- Button trigger modal -->
          <button type="button" class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded" data-toggle="modal" data-target="#memberModal">
            Members ({{!memberSize}})
          </button>

          <!--Modal-->
          <div id="memberModal" class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full" style="display: none;"
               aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title"id="memberModalLabel">Members</h5>
                    <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>-->
                  </div>

                  <div class="modal-body">
                    <ul class="min-w-full divide-y divide-gray-200">
                        {{!#members}}
                        <li class="px-6 py-4 whitespace-nowrap">{{!.}}</li>
                        {{!/members}}
                    </ul>
                  </div>
                </div>
          </div>
        </div>
        <div>Description Placeholder</div>
        <div class="p-2">
            <a href='#' class="bg-green-500 text-white font-bold py-2 px-4 rounded opacity-50 cursor-not-allowed">Invite</a>
            <a href='#' class="bg-red-500 text-white font-bold py-2 px-4 rounded opacity-50 cursor-not-allowed">Leave</a>
        </div>
      </div>
    </div>
  </div>
</script>
</body>
</html>
