(this["webpackJsonprre-openKnowledgeworker"]=this["webpackJsonprre-openKnowledgeworker"]||[]).push([[13],{1780:function(e,t,s){"use strict";s.r(t),s.d(t,"HTMLPackageComponent",(function(){return W}));var o=s(1722),a=s(0),i=s(116);var r=s(2),n=s(1026),c=s(1),d=s(19),p=s(59),h=s(1731),l=s(143),g=s.n(l),b=s(6),u=s(66),m=s(16),f=s(7);const S=Object(c.createSelector)([p.e],(e="")=>({learnerName:e})),O=Object(c.createIdSelector)(e=>e.textColor||""),T=Object(c.createIdSelector)(e=>e.actionColor||""),k=Object(c.createIdSelector)(e=>e.backgroundColor||""),v=Object(c.createIdSelector)(e=>e.actionTextColor||""),y=Object(c.createIdSelector)(e=>e.actionHoverColor||""),E=Object(c.createSelector)([O,d.K],(e,t)=>e||t["text-color"]),C=Object(c.createSelector)([O,d.K],(e,t)=>e||t["headline-color"]),j=Object(c.createSelector)([T,d.K],(e,t)=>e||t["action-color"]),M=Object(c.createSelector)([k],e=>e||"#fff"),D=Object(c.createSelector)([v,d.K],(e,t)=>e||t["action-text-color"]),x=Object(c.createSelector)([y,T,d.K],(e,t,s)=>t?e||g()(["white",t])(.85):e||s["button-hover-color"]),w=Object(c.createSelector)([d.B],e=>{const t=Object.assign(document.createElement("a"),{href:"."}).href;return e.map(e=>({...e,sources:e.sources.map(e=>({...e,src:`${t}${e.src}`}))}))}),A=Object(c.createSelector)([E,C,j,D,x,M,d.K,d.D,w],(e,t,s,o,a,i,r,n,c)=>({textColor:e,headlineColor:t,actionColor:s,actionTextColor:o,actionHoverColor:a,actionDisabledColor:r["action-disabled-color"],backgroundColor:i,feedbackPositiveColor:r["feedback-positive-color"],feedbackPartialPositiveColor:"rgb(135, 135, 135)",feedbackNegativeColor:r["feedback-negative-color"],feedbackSolutionColor:r["feedback-neutral-color"],textFontSize:r["text-font-size"],textFontFamily:n["text-font-family"]||"",headlineFontFamily:n["headline-font-family"]||"",headlineFontWeight:r["headline-font-weight"],buttonBorderRadius:r["button-border-radius"],fontFaces:c})),I=Object(c.createSelector)([A],e=>Object(h.getStyles)(e)),L=Object(c.createCompilationSelector)([m.d,b.h],[u.a],(e,t,s)=>[t,...s].filter(f.a).map(t=>{var s,a;return{uid:t.uid,type:t.type,title:t.type===o.ContextType.QUESTION?null!==(s=null===(a=Object(u.a)(e,{uid:t.uid}))||void 0===a?void 0:a.title)&&void 0!==s?s:void 0:Object(b.a)(t)}}).filter(e=>[o.ContextType.MEDIUM,o.ContextType.QUESTION,o.ContextType.SECTION,o.ContextType.CONTENT,o.ContextType.CHAPTER,o.ContextType.SITE].includes(e.type)));var P=s(1021),F=s(69),N=s(646),H=s(1972),R=s.n(H),K=s(3),_=s(1035);class W extends a.PureComponent{constructor(e){super(e),this.token=void 0,this.iFrameRef=a.createRef(),this.timer=void 0,this.state={isLoaded:!1,height:void 0},this.token=Math.random().toString(36).substr(2,9),this.onLoad=this.onLoad.bind(this),this.onMessage=this.onMessage.bind(this),this.postMessage=this.postMessage.bind(this)}componentDidMount(){window.addEventListener("message",this.onMessage),this.props.setPostMessage&&this.props.setPostMessage(this.postMessage)}componentWillUnmount(){window.removeEventListener("message",this.onMessage),window.clearTimeout(this.timer)}componentDidUpdate(e){var t,s,a;this.props.src!==e.src&&this.setState({isLoaded:!1}),this.props.sharedData!==e.sharedData&&this.postMessage((t=this.props.sharedData,{type:o.PackageAction.SET_SHARED_DATA,payload:{sharedData:t}})),this.props.design===e.design&&this.props.css===e.css||this.postMessage((s=this.props.design,a=this.props.css,{type:o.PackageAction.SET_DESIGN,payload:{design:s,css:a}}))}onLoad(e){var t;this.setState({isLoaded:!0}),this.postMessage((t={assetType:this.props.assetType,isEvaluated:this.props.isEvaluated,suspendData:this.props.suspendData,sharedData:this.props.sharedData,lmsData:this.props.lmsData,context:this.props.context,design:this.props.design,css:this.props.css},{type:o.PackageAction.INITIALIZE,payload:t})),this.props.onLoad&&this.props.onLoad(e)}onMessage(e){if(e.data.type&&e.data.token===this.token){switch(e.data.type===o.PackageAction.SET_HEIGHT&&this.setState({height:e.data.height}),e.data.type){case o.PackageAction.SET_SHARED_DATA:const{sharedData:t}=e.data;this.props.setEmbeddedAssetSharedData(t);break;case o.PackageAction.MESSAGE:this.props.onEmbeddedAssetMessage(e.data.message)}this.props.onMessage&&this.props.onMessage(e)}}postMessage(e){var t,s;return!!(null===(t=this.iFrameRef)||void 0===t||null===(s=t.current)||void 0===s?void 0:s.contentWindow)&&(this.iFrameRef.current.contentWindow.postMessage({type:e.type,token:this.token,...e.payload},i.a&&i.a.startsWith("http")?i.a:window.location.origin),!0)}get iframe(){return a.createElement("div",{className:R.a.package,"data-is-loaded":this.state.isLoaded,"data-has-thumb":this.props.hasThumb},a.createElement("iframe",{src:this.props.src,onLoad:this.onLoad,name:`{"token": "${this.token}", "origin": "${window.location.origin}"}`,scrolling:this.props.hasThumb?"yes":"no",ref:this.iFrameRef}))}render(){return this.props.hasThumb?this.iframe:a.createElement(N.a,Object.assign({},this.props,{forceHeight:this.state.height}),this.iframe)}}const Q=Object(F.a)(Object(K.injectIntl)(Object(_.a)(Object(r.b)((e,t)=>({sharedData:Object(n.a)(e),lmsData:S(e,t),design:A(e,t),css:I(e,t),context:t.uid?L(e,{uid:t.uid}):[]}),(e,t)=>({setEmbeddedAssetSharedData:t=>e(Object(P.c)(t)),onEmbeddedAssetMessage:s=>t.uid&&e(Object(P.b)(t.uid,s))}))(W))));t.default=Q},1972:function(e,t,s){e.exports={package:"_1PqTW8QZfZCE6QYfNlxrQB",loader:"_2gfggMeMMawnXm4seO8Ib8"}}}]);
//# sourceMappingURL=https://sourcemaps.intern.chemmedia.de/rre-view-openKnowledgeworker/23.7.5296/package.bf1eb8ec.chunk.js.map