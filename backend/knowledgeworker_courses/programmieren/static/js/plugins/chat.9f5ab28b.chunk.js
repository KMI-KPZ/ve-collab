(this["webpackJsonprre-openKnowledgeworker"]=this["webpackJsonprre-openKnowledgeworker"]||[]).push([[154],{1753:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);const i=r.createContext({})},1827:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(36),i=n(74);function o(){return function(e){return e.lift(new c)}}var c=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype._next=function(e){},t}(i.a)},1828:function(e,t,n){e.exports={chat:"PvJg-xTMbP9LU4ieeWrMc",loader:"_3rdGXGtPPf_wDz5oTZeqgO"}},1980:function(e,t,n){"use strict";n.r(t),n.d(t,"chatPlugin",(function(){return B}));const r={name:"chat",version:1};var i=n(0),o=n.n(i),c=n(88),a=n(1753);const s=({children:e,...t})=>i.createElement(a.a.Provider,{value:t},e);var u=n(567),l=n(547),f=n(936),h=n(605),d=n(1709),p=n(36),v=n(171);var b=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new y(e,this.keySelector,this.flushes))},e}(),y=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=n,i.values=new Set,r&&i.add(Object(v.c)(r,new v.a(i))),i}return p.a(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(r){return void n.error(r)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(v.b);var w=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new g(e,this.closingNotifier))},e}(),g=function(e){function t(t,n){var r=e.call(this,t)||this;return r.buffer=[],r.add(Object(v.c)(n,new v.a(r))),r}return p.a(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},t}(v.b),x=n(1714),S=n(1704),m=n(888);var O=n(1827),j=n(74);var _=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new P(e,this.accumulator,this.seed,this.hasSeed))},e}(),P=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return p.a(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)},t}(j.a);const I=({bufferPeriod:e,showInterval:t})=>{const[n,r]=i.useState([]),o=i.useMemo(()=>new u.a,[]);i.useEffect(()=>{var n,i,c,a,s;return o.pipe((function(e){return e.lift(new b(a,s))}),(c=o.pipe(Object(x.a)(e)),function(e){return e.lift(new w(c))}),Object(S.a)(e=>Object(l.a)(e.sort((e,t)=>e-t))),(n=e=>Object(f.a)(Object(h.a)(e),Object(d.a)(t).pipe(Object(O.a)())),Object(m.b)(n,i,1)),function(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new _(e,t,n))}}((e,t)=>[...e,t],[])).subscribe(e=>r(e)),()=>{o.unsubscribe()}},[o,e,t]);return{elementsInView:n,onChangeElementInView:(e,t)=>{t&&o.next(e)}}};var k=n(40),N=n(1),T=n(16);const E=Object(N.createSelector)([T.d],e=>{if((e=>void 0!==e&&"chat"===e.type)(e))return e}),V=Object(N.createSelector)([E],e=>null===e||void 0===e?void 0:e.state);Object(N.createSelector)([V],e=>null===e||void 0===e?void 0:e.owner),Object(N.createSelector)([V],e=>null===e||void 0===e?void 0:e.partner);var C=n(1828),M=n.n(C),z=n(3);const K=({children:e,owner:t,partner:n})=>{const{formatMessage:r}=Object(z.useIntl)(),i=(null===n||void 0===n?void 0:n.plainText)&&(null===t||void 0===t?void 0:t.plainText)?r({id:"plugin.chat.alt-template"},{partner:null===n||void 0===n?void 0:n.plainText,owner:null===t||void 0===t?void 0:t.plainText}):r({id:"plugin.chat.alt"});return o.a.createElement("div",{className:M.a.chat,role:"group","aria-label":i},e)};const B={...r,renderer:Object(c.a)()(({children:e,uid:t,editableProps:n})=>{const r=Object(k.a)(V,{uid:t}),{elementsInView:i,onChangeElementInView:c}=I({bufferPeriod:10,showInterval:50});return o.a.createElement(s,Object.assign({},r,{messagesInView:i,onChangeMessageInView:c}),o.a.createElement("div",n,o.a.createElement(K,r,e)))}),includeSpaceToTop:!0,allowAnimationBySection:!1,category:n(9).c.BASIC,includeInProgressTrackingByDefault:()=>!0,isScrollTarget:!0}},2026:function(e,t,n){"use strict";n.r(t),n.d(t,"chat",(function(){return r}));const r=n(1980).chatPlugin}}]);
//# sourceMappingURL=https://sourcemaps.intern.chemmedia.de/rre-view-openKnowledgeworker/23.7.5296/chat.9f5ab28b.chunk.js.map