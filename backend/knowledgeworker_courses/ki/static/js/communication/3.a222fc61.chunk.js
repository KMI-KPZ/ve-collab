(this["webpackJsonprre-openKnowledgeworker"]=this["webpackJsonprre-openKnowledgeworker"]||[]).push([[3],{1694:function(e,t,a){"use strict";a.r(t),a.d(t,"TRACKING_SCORM_INITIALIZE_REQUEST",(function(){return re})),a.d(t,"initializeApiTracking",(function(){return ne})),a.d(t,"trackingApiInitializeRequest",(function(){return oe}));var c=a(1097),r=a(1713),n=a(206),o=a(213),b=a(489),s=a(645),i=a(547),u=a(888),O=a(1577),p=a(80),j=a(24),l=(a(173),a(172),a(289)),d=a(70),y=a(229),A=a(45),m=a(90),S=a(59),E=a(642),T=a(689),D=a(945),v=a(599),_=a(35),f=a(1729),k=a(1),g=a(1067),I=a(1068),R=a(1065),N=a(1069),L=a(1070);const h=Object(k.createSelector)([g.b,I.a,R.a,L.a,N.a],(e,t,a,c,r)=>[...e,...t,...a,...c,...r]);var V=a(177),C=a(30),G=a(29),P=a(34),U=a(109);function q(e){return()=>{o.c.finishTracking(e)}}var w=a(891),B=a(836),K=a(324);function M(e){return Object(C.o)(e)&&$(e)&&void 0===e.payload.subtype&&Object(B.a)(e.payload.setSuspendDataRequestTimestamp)}function F(e){return Object(C.n)(e)&&(!$(e)||void 0!==e.payload.subtype||Object(B.a)(e.payload.setSuspendDataRequestTimestamp))}function z(e){return Object(C.q)(e)&&(!$(e)||Object(B.a)(e.payload.setSuspendDataRequestTimestamp))}function W(e){return Object(_.C)(e)||Object(K.a)(e)}var Z=a(238),H=a(250);let J;!function(e){e.GET_AND_SAVE_SUSPEND_DATA_WITH_API_INITIALIZE="@@trackingScorm/GET_AND_SAVE_SUSPEND_DATA_WITH_API_INITIALIZE",e.GET_AND_SAVE_SUSPEND_DATA="@@trackingScorm/GET_AND_SAVE_SUSPEND_DATA"}(J||(J={}));var Q=a(62),x=a(681),X=a(1027);var Y=a(268);function $(e){return e.payload.key===G.c.SuspendData||e.payload.key===G.f.SuspendData}function ee(e){if(!e||""===e)return{status:f.b.NOT_AVAILABLE};try{const t=JSON.parse(e);return{status:f.b.LOADED,suspendData:t}}catch{return{status:f.b.ERROR}}}const te=[Object(C.E)(),Object(C.z)()];function ae(e,t){return e.some(e=>t.some(t=>t.pluginUid===e.uid))}const ce=[(e,t)=>e.pipe(Object(O.a)(_.B),Object(n.a)(()=>{t.value;const e=q(t),a=Object(A.h)(t.value);return((e,t)=>{o.c.setScoreSynchronous(e,t,!0),o.c.setCompletionStatusSynchronous(e,!0,!0),o.c.setSuccessStatusSynchronous(e,G.g.Passed,!0)})(Object(S.a)(t.value),a),e(),Object(_.N)()})),(e,t)=>e.pipe(Object(O.a)(_.A),Object(n.a)(()=>(t.value,q(t)(),Object(_.N)()))),e=>e.pipe(Object(c.a)(C.l),Object(u.b)(()=>Object(i.a)(o.c.restartWaitForApi()).pipe(Object(n.a)(e=>e)))),e=>e.pipe(Object(c.a)(C.b),Object(n.a)(()=>o.c.initialize())),(e,t)=>e.pipe(Object(c.a)(_.u),Object(n.a)(()=>Object(S.a)(t.value)),Object(O.a)(e=>!o.c.isReadOnly(e)&&!o.c.isCommunicationClosed()),Object(n.a)(_.hb)),e=>e.pipe(Object(c.a)(C.d),Object(u.b)(()=>[o.c.getTrackingActionForGetCourseMode(),o.c.getTrackingActionForGetLearnerName()])),(e,t)=>e.pipe(Object(c.a)(C.i),Object(O.a)(e=>{const a=Object(V.a)(t.value);return!!a&&!a.isInitialized&&(e.payload.key===G.c.Mode||e.payload.key===G.f.Mode)}),Object(r.a)(({payload:e})=>{o.c.isCommunicationClosed()||function(e){const t=q(e);window.finishTracking=t,Object(U.e)(t)}(t)}),Object(u.a)(({payload:e})=>{const a=[],c=function(e,t){const a=e.result;if(a===Z.a.NORMAL||a===Z.a.BROWSE||a===Z.a.REVIEW)return a;const c=Object(V.a)(t);return c&&c.version===H.a.VERSION_12?Z.a.NORMAL:void 0}(e,t.value);return Object(P.d)(Object(b.e)(t.value),e.key,e.result),Object(P.b)(Object(b.e)(t.value),P.a.VALUE,"internal course mode: ",c),Object(P.b)(Object(b.e)(t.value),P.a.VALUE,"is adapter read only: ",o.c.isReadOnly(c)),void 0!==c&&a.push(Object(_.fb)(c)),e.result!==G.i.Browse?a.push(o.c.getTrackingActionForGetCompletionStatus()):a.push(...te),a})),(e,t)=>e.pipe(Object(c.a)(C.i),Object(O.a)(e=>{const a=Object(V.a)(t.value);return!!a&&!a.isInitialized&&(e.payload.key===G.c.CompletionStatus||e.payload.key===G.f.CompletionStatus)}),Object(u.a)(({payload:e})=>(Object(P.d)(Object(b.e)(t.value),e.key,e.result),e.result===G.d.NotAttempted||e.result===G.a.NotAttempted?[...o.c.getTrackingActionsForSetCompletionStatus(!1),...te]:te))),e=>e.pipe(Object(c.a)(C.h),Object(n.a)(()=>o.c.getTrackingActionForGetSuspendData(J.GET_AND_SAVE_SUSPEND_DATA_WITH_API_INITIALIZE))),(e,t)=>e.pipe(Object(c.a)(C.i),Object(O.a)(e=>$(e)&&e.payload.subtype===J.GET_AND_SAVE_SUSPEND_DATA_WITH_API_INITIALIZE),Object(u.a)(({payload:e})=>{const a=ee(e.result);if(Object(P.c)(Object(b.e)(t.value),e.key,e.result,a),a.status===f.b.NOT_AVAILABLE)return[Object(C.B)(),Object(_.S)("scorm")];if(a.status===f.b.ERROR)return[Object(C.A)(),Object(_.S)("scorm")];if(a.status===f.b.LOADED)try{const e=Object(s.b)(a.suspendData,t.value);return Object(w.b)(e.timestamp),[Object(C.B)(e),Object(_.eb)(e),Object(_.S)("scorm")]}catch(c){const e=Object(E.a)(t.value);return Object(v.b)(),[Object(_.kb)(c.name,c.message,a.suspendData),...o.c.getTrackingActionsForSetSuspendData(e,Object(v.a)()),Object(_.S)("scorm")]}return[]})),(e,t)=>e.pipe(Object(c.a)(C.i),Object(O.a)(e=>$(e)&&e.payload.subtype===J.GET_AND_SAVE_SUSPEND_DATA),Object(u.a)(({payload:e})=>{const a=ee(e.result);if(Object(P.c)(Object(b.e)(t.value),e.key,e.result,a),a.status===f.b.ERROR)return[Object(C.A)()];if(a.status===f.b.NOT_AVAILABLE)return[Object(C.B)()];if(a.status===f.b.LOADED)try{const e=Object(s.b)(a.suspendData,t.value);return Object(w.b)(e.timestamp),[Object(C.B)(e),Object(_.eb)(e),Object(_.hb)()]}catch(c){return[Object(_.kb)(c.name,c.message,a.suspendData),...o.c.getTrackingActionsForSetSuspendData(Object(E.a)(t.value),e.setSuspendDataRequestTimestamp)]}return[]})),e=>e.pipe(Object(O.a)(D.a),Object(n.a)(e=>o.c.getTrackingActionForGetSuspendData(void 0,e.payload.setSuspendDataRequestTimestamp))),(e,t)=>e.pipe(Object(O.a)(M),Object(u.a)(e=>{const a=ee(e.payload.result);if(Object(P.c)(Object(b.e)(t.value),e.payload.key,e.payload.result,a),a.status===f.b.ERROR)return[Object(C.A)(),Object(_.hb)()];const c=o.c.getTrackingActionsForSetSuspendData(Object(E.a)(t.value),e.payload.setSuspendDataRequestTimestamp),r=Object(C.I)(),n=o.c.getTrackingActionForGetSuspendData(J.GET_AND_SAVE_SUSPEND_DATA,e.payload.setSuspendDataRequestTimestamp),s=a.status===f.b.LOADED?a.suspendData:void 0;return[Object(_.R)(c,r,n,s,Object(w.a)(),e.payload.setSuspendDataRequestTimestamp)]})),(e,t,{addEpicsToMiddleware:a})=>e.pipe(Object(c.a)(m.b),Object(r.a)(()=>{const e=Object(S.a)(t.value);o.c.isReadOnly(e)||o.c.isCommunicationClosed()||a(h(t.value))}),Object(n.a)(C.K)),e=>e.pipe(Object(c.a)(C.a),Object(n.a)(()=>Object(l.b)("scorm.configuration.error",{titleKey:"modal.communication-error",messageKey:"tracking.scorm.error.configuration"}))),e=>e.pipe(Object(c.a)(C.f),Object(n.a)(()=>Object(l.b)("scorm.search.for.api.error",{titleKey:"modal.communication-error",messageKey:"tracking.scorm.error.search.for.api"}))),e=>e.pipe(Object(c.a)(C.c),Object(n.a)(()=>Object(l.b)("scorm.api.initialize.error",{titleKey:"modal.communication-error",messageKey:"tracking.scorm.error.api.initialize"}))),e=>e.pipe(Object(c.a)(C.e),Object(n.a)(()=>Object(l.b)("scorm.api.not.found.error",{titleKey:"modal.communication-error",messageKey:"tracking.scorm.error.api.not.available"}))),(e,t)=>e.pipe(Object(O.a)(z),Object(u.b)(e=>{t.value;const a=o.c.setValue(Object(S.a)(t.value),e.payload.key,e.payload.value);return Object(P.e)(Object(b.e)(t.value),e.payload.key,e.payload.value,a),""!==a||o.c.isOfflineTestMode()?$(e)&&"true"===a?function(e,t){const a=JSON.parse(t);return Object(w.b)(a.a),[Object(C.M)(e,t,"true"),Object(C.J)(t),Object(_.hb)()]}(e.payload.key,e.payload.value):$(e)&&"true"!==a?function(e,t,a){return[Object(C.M)(e,t,a),Object(C.H)(),Object(_.hb)()]}(e.payload.key,e.payload.value,a):[Object(C.M)(e.payload.key,e.payload.value,a)]:[Object(C.w)()]})),(e,t)=>e.pipe(Object(O.a)(F),Object(n.a)(e=>(t.value,Object(C.D)(e.payload.key,o.c.getValue(e.payload.key),e.payload.subtype,e.payload.setSuspendDataRequestTimestamp)))),e=>e.pipe(Object(c.a)(C.j),Object(n.a)(()=>Object(C.G)(o.c.setCommit()))),(e,t)=>e.pipe(Object(c.a)(C.i),Object(O.a)(e=>e.payload.key===G.c.LearnerName||e.payload.key===G.f.LearnerName),Object(n.a)(e=>(Object(P.d)(Object(b.e)(t.value),e.payload.key,e.payload.result),Object(_.gb)(e.payload.result)))),(e,t)=>e.pipe(Object(c.a)(j.g),Object(u.b)(({payload:e})=>!Object(T.a)(t.value)||function(e,t){const a=Object(y.a)(e),c=Object(d.i)(e);return ae(a,t)||ae(c,t)}(t.value,e.updates)?[Object(_.ib)()]:[])),s.d,s.c,s.e,(e,t)=>e.pipe(Object(O.a)(W),Object(u.b)(e=>{if(Object(_.C)(e))return[Object(C.y)()];return Object(p.d)(t.value)?[]:[Object(C.y)()]})),(e,t)=>e.pipe(Object(O.a)(e=>function(e,t){return Object(Q.h)(t)||Object(x.a)(t)||Object(X.a)(e,t)}(t.value,e)),Object(O.a)(()=>Object(Y.a)(t.value)),Object(n.a)(C.r))];const re="@@trackingScorm/INITIALIZE_REQUEST",ne=(e,t,{addEpicsToMiddleware:a})=>e.pipe(Object(c.a)(re),Object(r.a)(()=>a(ce)),Object(n.a)(()=>(Object(P.b)(Object(b.e)(t.value),P.a.TITLE,"scormAdapter: start search for api"),o.c.startApiSearch(Object(b.e)(t.value),Object(V.a)(t.value))))),oe=()=>({type:re})},1729:function(e,t,a){"use strict";let c,r;a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return r})),function(e){e[e.ERROR=0]="ERROR",e[e.NOT_AVAILABLE=1]="NOT_AVAILABLE",e[e.LOADED=2]="LOADED"}(c||(c={})),function(e){e.QR="qr"}(r||(r={}))}}]);
//# sourceMappingURL=https://sourcemaps.intern.chemmedia.de/rre-view-openKnowledgeworker/23.7.5296/3.a222fc61.chunk.js.map