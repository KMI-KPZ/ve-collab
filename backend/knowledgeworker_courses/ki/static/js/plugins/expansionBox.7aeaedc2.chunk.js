(this["webpackJsonprre-openKnowledgeworker"]=this["webpackJsonprre-openKnowledgeworker"]||[]).push([[158],{1809:function(e,t,n){e.exports={expansionBox:"_19hzgQ0sv34FUrMvuHGfyA",loader:"_1f9wzP5GBVNlP-j7yvKU71"}},1810:function(e,t,n){e.exports={item:"_30LNt1SzMoxQzwjYMTND1Z",contentWrapper:"_28b5UWASMwYOFHIdQx0Qh-",enter:"_2Hakc4ab_zk9j8d09ncyfQ",leave:"_1bpx8tJmKUb3_rPWvPD6GL",content:"_2uwI5S9P-603LKNghx1gYf"}},1811:function(e,t,n){e.exports={items:"_1QzCAgKp_GuqiF7baJKkPb"}},1812:function(e,t,n){e.exports={wrapper:"_1XCZG_KyCDY8w2z7ekv2u0",toggleButton:"_1NnDaqRemyBVqla1WnzMPx",loader:"_1uGNiWlNoho_5HMPxAqibE"}},1975:function(e,t,n){"use strict";n.r(t),n.d(t,"expansionBoxPlugin",(function(){return le}));var o=n(9),a=n(0),i=n(2),r=n(88),s=n(1),l=n(99),c=n(13),p=n(16),d=n(4);const u={name:"expansionBox",version:1},m=e=>void 0!==e&&e.type===u.name,b=e=>void 0!==e&&e.type===u.name,g=Object(s.createSelector)([p.d],e=>{if(m(e))return e}),h=Object(s.createSelector)([d.k],e=>{var t;return null!==(t=e.expansionBox)&&void 0!==t?t:{}}),v=Object(s.createSelector)([l.a],e=>e.map(e=>{var t,n;return{uid:e.uid,title:(null===(t=e.state)||void 0===t||null===(n=t.title)||void 0===n?void 0:n.html)||""}})),I=Object(s.createSelector)([h,c.c],(e,t)=>e[t]),x=Object(s.createSelector)([I],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.openItems)&&void 0!==t?t:[]}),O=Object(s.createSelector)([I],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.interactionComplete)&&void 0!==t&&t}),f=Object(s.createSelector)([v,x],(e,t)=>{var n;const o=t[t.length-1],a=o?e.findIndex(e=>e.uid===o):0;return null===(n=e[a+1])||void 0===n?void 0:n.uid});var C=n(1809),T=n.n(C);const j=({numberOfChildPlugins:e,editableProps:t,children:n,isInteractionComplete:o})=>{const i=a.useCallback(e=>{e.stopPropagation()},[]);return a.createElement("div",Object.assign({onClick:i,className:T.a.expansionBox,"data-item-count":e,"data-is-interaction-complete":o},t),n)};var E=n(937),P=n(938),y=n(150),B=n(54),w=n(190),k=n(1810),S=n.n(k),N=n(3);let U;!function(e){e.ITEM="expansionBoxItem",e.TOGGLE_BUTTON="expansionBoxToggleButton"}(U||(U={}));var _=n(944);const G={enter:S.a.enter,exit:S.a.leave},R={exit:350},M=Object(y.a)({dontScrollIfInViewPort:!0})(({onReadyToScroll:e,children:t,isOpen:n,onClick:o,hasTwoItems:i,onRefChange:r,itemNumber:s,itemCount:l})=>{const{formatMessage:c}=Object(N.useIntl)(),p=a.useRef(!1),d=Object(_.a)(n);a.useEffect(()=>{n&&!1===d&&(p.current=!0)},[n,d]);return a.createElement("section",{className:S.a.item,onClick:o,"data-has-two-items":i,"data-is-clickable":!!o,ref:r,"aria-label":c({id:"plugin.expansion-box.element"},{activeItem:s,numberOfExpandableItems:l})},a.createElement(w.a,{duration:350,className:S.a.contentWrapper,onAnimationFinished:()=>{n&&p.current&&(e(),p.current=!1)}},a.createElement(P.a,{component:"div"},(()=>{if(n)return a.createElement(E.a,{classNames:G,enter:!1,timeout:R},a.createElement(B.a,{colorSetName:null},a.createElement("div",{className:S.a.content,"aria-live":"polite","data-test-id":U.ITEM},t)))})())))});var D=n(1811),L=n.n(D);class A extends a.PureComponent{getItemContent(e){const{children:t}=this.props,n=a.Children.toArray(t);if(n&&n[e])return n[e]}get items(){if(this.props.itemsToRender&&this.props.itemsToRender.length>0){const e=2===this.props.itemsToRender.length;return this.props.itemsToRender.map((t,n)=>{const o=0===n||this.props.openItems.includes(t.uid),i=!this.props.hasEditableProps&&e&&0===n?e=>{var t;e.stopPropagation(),this.props.toggleItem(null===(t=this.props.itemsToRender[1])||void 0===t?void 0:t.uid)}:void 0;return a.createElement(M,{key:n,itemNumber:n+1,itemCount:this.props.itemsToRender.length,hasTwoItems:e,isOpen:o,onClick:i},this.getItemContent(n))})}return this.props.placeholder?this.props.placeholder:null}render(){return a.createElement("div",{className:L.a.items,"aria-live":"polite"},this.items)}}var V=n(1812),z=n.n(V);class K extends a.PureComponent{render(){const{numberOfItems:e,numberOfOpenItems:t,canExpand:n,onToggleItem:o}=this.props,i=this.props.hasEditableProps||e>=2?o:void 0,r=e-1,s=t>0,l=s?"plugin.expansion-box.toggle-button.expanded":"plugin.expansion-box.toggle-button.collapsed",c=this.props.intl.formatMessage({id:l},{numberOfOpenItems:t,numberOfExpandableItems:r});return a.createElement("div",{className:z.a.wrapper},a.createElement("button",{className:z.a.toggleButton,"data-can-expand":n,"data-has-two-items":2===e,"data-is-interaction-complete":this.props.isInteractionComplete,onClick:i,"data-test-id":U.TOGGLE_BUTTON,"aria-expanded":s,"aria-label":c}))}}const W=Object(N.injectIntl)(K);var Q=n(482);class Y extends a.PureComponent{constructor(e){super(e),this.toggleItem=this.toggleItem.bind(this)}expandItem(e){this.props.boxToggle(e)}collapseItem(){this.props.boxToggle(null)}toggleItem(e){e?this.expandItem(e):this.collapseItem()}render(){const{itemsToRender:e,children:t,editableData:n,editableProps:o,nextClosedItem:i,openItems:r,isInteractionComplete:s}=this.props;return a.createElement(j,{editableProps:o,numberOfChildPlugins:e.length,isInteractionComplete:s},a.createElement(Q.a,{hasVisibleBackgroundMedium:!1},a.createElement(A,{itemsToRender:e,hasEditableProps:void 0!==o,openItems:r,placeholder:n&&n.placeholder,toggleItem:this.toggleItem},t)),a.createElement(W,{hasEditableProps:void 0!==o,canExpand:!!i,numberOfItems:e.length,numberOfOpenItems:r.length,onToggleItem:()=>this.toggleItem(i),isInteractionComplete:s}))}}const q=Object(r.a)({dontScrollIfInViewPort:!0})(Object(i.b)((e,t)=>({itemsToRender:v(e,t),nextClosedItem:f(e,t),openItems:x(e,t),isInteractionComplete:O(e,t)}),(e,t)=>({boxToggle:n=>e(((e,t)=>({type:"@@expansionBox/TOGGLE",payload:{uid:e,subcontentUid:t}}))(t.uid,n))}))(Y));var F=n(1097),H=n(206),J=n(1577),Z=n(8),X=n(23),$=n(263),ee=n(437);var te=n(7),ne=n(164),oe=n(6);const ae=[(e,t)=>e.pipe(Object(F.a)(X.f),Object(H.a)(({payload:e})=>Object(oe.T)(m)(t.value,{uid:e.pluginUid||e.uid})),Object(J.a)(te.a),Object(J.a)(e=>{var n;return!1===(null===(n=I(t.value,e))||void 0===n?void 0:n.interactionComplete)}),Object(J.a)(e=>Object(ne.a)(t.value,e)),Object(H.a)(e=>Object(X.o)("expansionBox",e.uid))),e=>e.pipe(Object(F.a)("@@expansionBox/TOGGLE"),Object(H.a)(({payload:e})=>e.subcontentUid),Object(J.a)(ee.a),Object(H.a)(e=>Object(X.o)($.b,e))),e=>e.pipe(Object(F.a)("@@expansionBox/TOGGLE"),Object(J.a)(e=>null===e.payload.subcontentUid),Object(H.a)(e=>Object(Z.ab)(e.payload.uid)))];var ie=n(33);const re={openItems:[],interactionComplete:!1};const se={initialViewParams:(e,t,n)=>function(e,t){var n;const o=g(e,{uid:t}),a=Object(ie.f)(e,{uid:t});return 1===(null===o||void 0===o||null===(n=o.children)||void 0===n?void 0:n.length)&&1===a.length?{...re,interactionComplete:!0}:re}(t,n),suspendDataViewParams:e=>({...e.openItems.length>0&&{openItems:e.openItems},...e.interactionComplete&&{interactionComplete:e.interactionComplete}}),reducedSuspendDataViewParams:()=>({}),minifyMap:()=>({openItems:{key:"a",valueDataType:o.a.Array},interactionComplete:{key:"c",valueDataType:o.a.Boolean}})},le={...u,renderer:q,category:o.c.BASIC,includeSpaceToTop:!0,viewParams:se,viewReducer:(e,t)=>{switch(t.type){case"@@expansionBox/TOGGLE":{const{payload:n}=t,o=e[n.uid];if(!b(o))return e;let a=o.openItems;return a=n.subcontentUid?a.includes(n.subcontentUid)?a.filter(e=>e!==n.subcontentUid):[...a,n.subcontentUid]:[],{...e,[n.uid]:{...e[n.uid],openItems:a}}}case"@@expansionBox/SWAP_VISIBILITY":{const{payload:n}=t,o=e[n.uid];if(!b(o))return e;let a=o.openItems;const i=a.includes(n.subcontentUid2),r=a.includes(n.subcontentUid1);return a=i?[...a,n.subcontentUid1]:a.filter(e=>e!==n.subcontentUid1),a=r?[...a,n.subcontentUid2]:a.filter(e=>e!==n.subcontentUid2),{...e,[n.uid]:{...e[n.uid],openItems:a}}}default:return e}},epics:ae,includeInProgressTrackingByDefault:()=>!0,isScrollTarget:!0,canConceal:!0,isChildSubcontentInteractionCompleteInitially:(e,t)=>{var n;return e.uid===(null===t||void 0===t||null===(n=t.children)||void 0===n?void 0:n[0])},stateTransformers:[e=>{if(e.state){const{variant:t,...n}=e.state;t&&(e.state=n)}return e.state}],isInteractive:!0}},2021:function(e,t,n){"use strict";n.r(t),n.d(t,"expansionBox",(function(){return o}));const o=n(1975).expansionBoxPlugin}}]);
//# sourceMappingURL=https://sourcemaps.intern.chemmedia.de/rre-view-openKnowledgeworker/23.7.5296/expansionBox.7aeaedc2.chunk.js.map