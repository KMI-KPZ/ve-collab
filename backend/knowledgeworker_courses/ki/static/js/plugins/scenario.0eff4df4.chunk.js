(this["webpackJsonprre-openKnowledgeworker"]=this["webpackJsonprre-openKnowledgeworker"]||[]).push([[170],{1720:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextType=t.AssetType=t.PackageAction=void 0,function(e){e.CONFIGURE="KW_PACKAGE_CONFIGURE",e.SET_HEIGHT="KW_PACKAGE_SET_HEIGHT",e.SET_COMPLETE="KW_PACKAGE_SET_COMPLETE",e.MESSAGE="KW_PACKAGE_MESSAGE",e.ANSWERED="KW_PACKAGE_ANSWERED",e.CHECK_ANSWER_BUTTON_CLICKED="KW_PACKAGE_CHECK_ANSWER_BUTTON_CLICKED",e.SOLUTION_BUTTON_CLICKED="KW_PACKAGE_SOLUTION_BUTTON_CLICKED",e.RETRY_BUTTON_CLICKED="KW_PACKAGE_RETRY_BUTTON_CLICKED",e.SET_SUSPEND_DATA="KW_PACKAGE_SET_SUSPEND_DATA",e.SET_SHARED_DATA="KW_PACKAGE_SET_SHARED_DATA",e.INITIALIZE="KW_PACKAGE_INITIALIZE",e.SET_EVALUATED="KW_PACKAGE_SET_EVALUATED",e.SHOW_CHECK_ANSWER_BUTTON="KW_PACKAGE_SHOW_CHECK_ANSWER_BUTTON",e.SHOW_RESULT="KW_PACKAGE_SHOW_RESULT",e.SHOW_FEEDBACK="KW_PACKAGE_SHOW_FEEDBACK",e.SHOW_ANSWER_FEEDBACK="KW_PACKAGE_SHOW_ANSWER_FEEDBACK",e.SHOW_RETRY_BUTTON="KW_PACKAGE_SHOW_RETRY_BUTTON",e.SHOW_SOLUTION_BUTTON="KW_PACKAGE_SHOW_SOLUTION_BUTTON",e.SHOW_SOLUTION="KW_PACKAGE_SHOW_SOLUTION",e.SET_DESIGN="KW_PACKAGE_SET_DESIGN",e.DEACTIVATE="KW_PACKAGE_DEACTIVATE",e.RESET="KW_PACKAGE_RESET"}(t.PackageAction||(t.PackageAction={})),function(e){e.MEDIUM="medium",e.QUESTION="question",e.QUESTION_WITH_CUSTOM_QUESTION_TEXT="question-with-custom-question-text",e.ADVANCED_QUESTION="advanced-question"}(t.AssetType||(t.AssetType={})),function(e){e.MEDIUM="medium",e.QUESTION="question",e.SECTION="section",e.CONTENT="content",e.CHAPTER="chapter",e.SITE="site"}(t.ContextType||(t.ContextType={}))},1722:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.onSharedDataChanged=t.onDesignChanged=t.onReset=t.onDeactivate=t.onShowSolution=t.onShowAnswerFeedback=t.onShowFeedback=t.onShowResult=t.onShowSolutionButton=t.onShowRetryButton=t.onShowCheckAnswerButton=t.onEvaluatedChanged=t.onInitialize=t.configure=t.message=t.retryButtonClicked=t.solutionButtonClicked=t.checkAnswerButtonClicked=t.completed=t.setSharedData=t.setSuspendData=t.answered=t.setHeight=void 0;var r=n(1735);Object.defineProperty(t,"setHeight",{enumerable:!0,get:function(){return r.setHeight}}),Object.defineProperty(t,"answered",{enumerable:!0,get:function(){return r.answered}}),Object.defineProperty(t,"setSuspendData",{enumerable:!0,get:function(){return r.setSuspendData}}),Object.defineProperty(t,"setSharedData",{enumerable:!0,get:function(){return r.setSharedData}}),Object.defineProperty(t,"completed",{enumerable:!0,get:function(){return r.completed}}),Object.defineProperty(t,"checkAnswerButtonClicked",{enumerable:!0,get:function(){return r.checkAnswerButtonClicked}}),Object.defineProperty(t,"solutionButtonClicked",{enumerable:!0,get:function(){return r.solutionButtonClicked}}),Object.defineProperty(t,"retryButtonClicked",{enumerable:!0,get:function(){return r.retryButtonClicked}}),Object.defineProperty(t,"message",{enumerable:!0,get:function(){return r.message}}),Object.defineProperty(t,"configure",{enumerable:!0,get:function(){return r.configure}});var o=n(1736);Object.defineProperty(t,"onInitialize",{enumerable:!0,get:function(){return o.onInitialize}}),Object.defineProperty(t,"onEvaluatedChanged",{enumerable:!0,get:function(){return o.onEvaluatedChanged}}),Object.defineProperty(t,"onShowCheckAnswerButton",{enumerable:!0,get:function(){return o.onShowCheckAnswerButton}}),Object.defineProperty(t,"onShowRetryButton",{enumerable:!0,get:function(){return o.onShowRetryButton}}),Object.defineProperty(t,"onShowSolutionButton",{enumerable:!0,get:function(){return o.onShowSolutionButton}}),Object.defineProperty(t,"onShowResult",{enumerable:!0,get:function(){return o.onShowResult}}),Object.defineProperty(t,"onShowFeedback",{enumerable:!0,get:function(){return o.onShowFeedback}}),Object.defineProperty(t,"onShowAnswerFeedback",{enumerable:!0,get:function(){return o.onShowAnswerFeedback}}),Object.defineProperty(t,"onShowSolution",{enumerable:!0,get:function(){return o.onShowSolution}}),Object.defineProperty(t,"onDeactivate",{enumerable:!0,get:function(){return o.onDeactivate}}),Object.defineProperty(t,"onReset",{enumerable:!0,get:function(){return o.onReset}}),Object.defineProperty(t,"onDesignChanged",{enumerable:!0,get:function(){return o.onDesignChanged}}),Object.defineProperty(t,"onSharedDataChanged",{enumerable:!0,get:function(){return o.onSharedDataChanged}}),a(n(1720),t)},1723:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConfig=void 0;t.getConfig=()=>{let e={};try{e=JSON.parse(window.name)}catch(t){}if((null===e||void 0===e?void 0:e.token)&&(null===e||void 0===e?void 0:e.origin))return e}},1731:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStyles=t.getCssVariables=t.getFontFaces=t.defaultDesign=void 0,t.defaultDesign={textColor:"#000",headlineColor:"#000",actionColor:"#E8398E",actionTextColor:"#fff",actionHoverColor:"rgb(235,87,159)",actionDisabledColor:"#939393",backgroundColor:"#fff",feedbackPositiveColor:"#008c14",feedbackPartialPositiveColor:"rgb(135, 135, 135)",feedbackNegativeColor:"#c80000",feedbackSolutionColor:"#ebaf0b",textFontSize:"18px",textFontFamily:"Hind, Arial, sans-serif",headlineFontFamily:"Hind, Arial, sans-serif",headlineFontWeight:"300",buttonBorderRadius:"0",fontFaces:[{name:"Hind",sources:[{src:n(1738),format:"woff2"}],fontWeight:"normal",fontStyle:"normal"},{name:"Hind",sources:[{src:n(1739),format:"woff2"}],fontWeight:"bold",fontStyle:"normal"}]};t.getFontFaces=({fontFaces:e})=>e.map(e=>`\n        @font-face {\n            font-family: '${e.name}';\n            src: ${e.sources.map(e=>`url("${e.src}") format("${e.format}")`).join(",")};\n            font-weight: ${e.fontWeight};\n            font-style: ${e.fontStyle};\n            font-display: block;\n        }\n    `).join("");t.getCssVariables=({textColor:e,headlineColor:t,actionColor:n,actionTextColor:i,actionHoverColor:a,actionDisabledColor:r,backgroundColor:o,feedbackPositiveColor:s,feedbackPartialPositiveColor:c,feedbackNegativeColor:d,feedbackSolutionColor:l,textFontSize:u,textFontFamily:m,headlineFontFamily:p,headlineFontWeight:h,buttonBorderRadius:b})=>`\n    :root {\n        --kw-text-color: ${e};\n        --kw-headline-color: ${t};\n        --kw-action-color: ${n};\n        --kw-action-text-color: ${i};\n        --kw-action-hover-color: ${a};\n        --kw-action-disabled-color: ${r};\n        --kw-background-color: ${o};\n        --kw-feedback-positive-color: ${s};\n        --kw-feedback-partial-positive-color: ${c};\n        --kw-feedback-negative-color: ${d};\n        --kw-feedback-solution-color: ${l};\n        --kw-text-font-size: ${u};\n        --kw-text-font-family: ${m};\n        --kw-headline-font-family: ${p};\n        --kw-headline-font-weight: ${h};\n        --kw-button-border-radius: ${b};\n    }\n`;t.getStyles=e=>`\n    ${(0,t.getFontFaces)(e)}\n    \n    ${(0,t.getCssVariables)(e)}\n    \n    .kw-paragraph,\n    .kw-link {\n        font-family: var(--kw-text-font-family);\n        font-size: var(--kw-text-font-size);\n        font-weight: 300;\n        line-height: 1.6em;\n        color: var(--kw-text-color);\n    }\n    \n    .kw-paragraph a,\n    .kw-link {\n        text-decoration: none;\n        color: var(--kw-action-color);\n        cursor: pointer;\n    }\n    \n    .kw-paragraph a:not([disabled]):hover,\n    .kw-link:not([disabled]):hover {\n        color: var(--kw-action-hover-color);\n    }\n    \n    .kw-paragraph a[disabled],\n    .kw-link[disabled] {\n      color: var(--kw-action-disabled-color);\n      cursor: not-allowed;\n    }\n    \n    .kw-headline2,\n    .kw-headline3,\n    .kw-headline4,\n    .kw-headline5,\n    .kw-headline6 {\n        font-family: var(--kw-headline-font-family);\n        font-weight: var(--kw-headline-font-weight);\n        line-height: 1.2em;\n        color: var(--kw-headline-color);\n    }\n    \n    .kw-headline2 {\n        font-size: 32px;\n    }\n    \n    .kw-headline3 {\n        font-size: 28px;\n    }\n    \n    .kw-headline4 {\n        font-size: 24px;\n    }\n    \n    .kw-headline5 {\n        font-size: 20px;\n        line-height: 1.3em;\n    }\n    \n    .kw-headline6 {\n        font-size: 18px;\n        font-weight: bold;\n    }\n    \n    .kw-button-primary,\n    .kw-button-secondary {\n        font-family: var(--kw-text-font-family);\n        font-size: var(--kw-text-font-size);\n        font-weight: 300;\n        line-height: 1.6em;\n        background: var(--kw-action-color);\n        color: var(--kw-action-text-color);\n        border: none;\n        text-decoration: none;\n        display: inline-block;\n        padding: 7px 20px;\n        box-shadow: 0 0 2px rgba(0, 0, 0, .3);\n        cursor: pointer;\n        transition: box-shadow 100ms ease-out;\n        appearance: none;\n        border-radius: var(--kw-button-border-radius);\n    }\n    \n    .kw-button-primary:not([disabled]):hover {\n        background: var(--kw-action-hover-color);\n        color: var(--kw-action-text-color);\n        box-shadow: 0 0 5px rgba(0, 0, 0, .6);\n    }\n\n    .kw-button-primary[disabled] {\n        background: var(--kw-action-disabled-color);\n        cursor: not-allowed;\n        box-shadow: none;\n    }\n\n    .kw-button-primary:focus {\n        outline: 2px solid var(--kw-action-hover-color);\n    }\n    \n    .kw-button-secondary {\n        background-color: transparent;\n        color: var(--kw-action-color);\n        box-shadow: none;\n        outline: 1.5px solid var(--kw-action-color);\n        outline-offset: -1px;\n    }\n\n    .kw-button-secondary[disabled] {\n        color: var(--kw-action-disabled-color);\n        background-color: transparent;\n        cursor: not-allowed;\n        outline-color: var(--kw-action-disabled-color);\n    }\n\n    .kw-button-secondary:not([disabled]):hover {\n        color: var(--kw-action-hover-color);\n        outline-color: var(--kw-action-hover-color);\n        background: transparent !important;\n        box-shadow: 0 0 5px rgba(0, 0, 0, .4);\n    }\n`.replace(/( {2,}|\n)/g,"")},1735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.message=t.retryButtonClicked=t.solutionButtonClicked=t.checkAnswerButtonClicked=t.completed=t.configure=t.setSharedData=t.setSuspendData=t.answered=t.setHeight=void 0;const i=n(1720),a=n(1723),r=(e,t)=>{const n=(0,a.getConfig)();(null===n||void 0===n?void 0:n.token)&&(null===n||void 0===n?void 0:n.origin)&&window.parent&&window.parent.postMessage(Object.assign({type:e,token:n.token},t),n.origin)};t.setHeight=e=>{if(void 0!==e&&("number"!==typeof e||isNaN(e)||e<=0))throw Error("Height should be a positive number or undefined!");r(i.PackageAction.SET_HEIGHT,{height:e})};t.answered=(e,t,n)=>{if("string"!==typeof e&&"undefined"!==typeof e)throw Error("Answer should be a string or undefined!");if("boolean"!==typeof t)throw Error("Passed should be a boolean!");if("number"!==typeof n||isNaN(n)||n<0||n>1)throw Error("Score should be a number between 0 and 1!");r(i.PackageAction.ANSWERED,{answer:e,passed:t,score:n})};t.setSuspendData=e=>{if("string"!==typeof e)throw Error("SuspendData should be a string!");r(i.PackageAction.SET_SUSPEND_DATA,{suspendData:e})};t.setSharedData=e=>{if("string"!==typeof e)throw Error("SuspendData should be a string!");r(i.PackageAction.SET_SHARED_DATA,{sharedData:e})};t.configure=e=>{if("object"!==typeof e)throw Error("Options should be an object!");r(i.PackageAction.CONFIGURE,{options:e})};t.completed=()=>r(i.PackageAction.SET_COMPLETE,{complete:!0});t.checkAnswerButtonClicked=()=>r(i.PackageAction.CHECK_ANSWER_BUTTON_CLICKED);t.solutionButtonClicked=()=>r(i.PackageAction.SOLUTION_BUTTON_CLICKED);t.retryButtonClicked=()=>r(i.PackageAction.RETRY_BUTTON_CLICKED);t.message=e=>r(i.PackageAction.MESSAGE,{message:e})},1736:function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.onSharedDataChanged=t.onDesignChanged=t.onReset=t.onDeactivate=t.onShowSolution=t.onShowAnswerFeedback=t.onShowFeedback=t.onShowResult=t.onShowSolutionButton=t.onShowRetryButton=t.onShowCheckAnswerButton=t.onEvaluatedChanged=t.onInitialize=void 0;const a=n(1720),r=n(1723),o=n(1737),s={};t.onInitialize=e=>s.initialize=e;t.onEvaluatedChanged=e=>s.setEvaluated=e;t.onShowCheckAnswerButton=e=>s.showCheckAnswerButton=e;t.onShowRetryButton=e=>s.showRetryButton=e;t.onShowSolutionButton=e=>s.showSolutionButton=e;t.onShowResult=e=>s.showResult=e;t.onShowFeedback=e=>s.showFeedback=e;t.onShowAnswerFeedback=e=>s.showAnswerFeedback=e;t.onShowSolution=e=>s.showSolution=e;t.onDeactivate=e=>s.deactivate=e;t.onReset=e=>s.reset=e;t.onDesignChanged=e=>s.setDesign=e;t.onSharedDataChanged=e=>s.setSharedData=e;window.addEventListener("message",e=>{var t,n,c,d,l,u,m,p,h,b,v,g,w;const S=(0,r.getConfig)(),E=e.data,{type:f,token:A}=E,O=i(E,["type","token"]);if(A===(null===S||void 0===S?void 0:S.token))switch(f){case a.PackageAction.INITIALIZE:const{css:e}=O,r=i(O,["css"]);null===(t=null===s||void 0===s?void 0:s.initialize)||void 0===t||t.call(s,r),(0,o.setDesign)(e);break;case a.PackageAction.SET_EVALUATED:null===(n=null===s||void 0===s?void 0:s.setEvaluated)||void 0===n||n.call(s,O.isEvaluated);break;case a.PackageAction.SHOW_CHECK_ANSWER_BUTTON:null===(c=null===s||void 0===s?void 0:s.showCheckAnswerButton)||void 0===c||c.call(s,O.show);break;case a.PackageAction.SHOW_RETRY_BUTTON:null===(d=null===s||void 0===s?void 0:s.showRetryButton)||void 0===d||d.call(s,O.show);break;case a.PackageAction.SHOW_SOLUTION_BUTTON:null===(l=null===s||void 0===s?void 0:s.showSolutionButton)||void 0===l||l.call(s,O.show);break;case a.PackageAction.SHOW_RESULT:null===(u=null===s||void 0===s?void 0:s.showResult)||void 0===u||u.call(s,O.passed);break;case a.PackageAction.SHOW_FEEDBACK:null===(m=null===s||void 0===s?void 0:s.showFeedback)||void 0===m||m.call(s);break;case a.PackageAction.SHOW_ANSWER_FEEDBACK:null===(p=null===s||void 0===s?void 0:s.showAnswerFeedback)||void 0===p||p.call(s);break;case a.PackageAction.SHOW_SOLUTION:null===(h=null===s||void 0===s?void 0:s.showSolution)||void 0===h||h.call(s);break;case a.PackageAction.DEACTIVATE:null===(b=null===s||void 0===s?void 0:s.deactivate)||void 0===b||b.call(s);break;case a.PackageAction.RESET:null===(v=null===s||void 0===s?void 0:s.reset)||void 0===v||v.call(s);break;case a.PackageAction.SET_SHARED_DATA:null===(g=null===s||void 0===s?void 0:s.setSharedData)||void 0===g||g.call(s,O.sharedData);break;case a.PackageAction.SET_DESIGN:(0,o.setDesign)(O.css),null===(w=null===s||void 0===s?void 0:s.setDesign)||void 0===w||w.call(s,O.design)}})},1737:function(e,t,n){"use strict";var i,a;Object.defineProperty(t,"__esModule",{value:!0}),t.setDesign=void 0;const r=n(1731);t.setDesign=e=>{o.innerHTML=e};const o=null===(i=null===window||void 0===window?void 0:window.document)||void 0===i?void 0:i.createElement("style");if(null===window||void 0===window?void 0:window.document){const e=null===(a=null===window||void 0===window?void 0:window.document)||void 0===a?void 0:a.head;o.id="kw",e.insertBefore(o,e.firstChild),o.innerHTML=(0,r.getStyles)(r.defaultDesign)}},1738:function(e,t,n){e.exports=n.p+"static/media/hind-light-webfont.bc10a372.woff2"},1739:function(e,t,n){e.exports=n.p+"static/media/hind-medium-webfont.dde30057.woff2"},1829:function(e,t,n){e.exports=n.p+"static/media/positive.246e69c2.jpg"},1830:function(e,t,n){e.exports=n.p+"static/media/neutral.a36f5e38.jpg"},1831:function(e,t,n){e.exports=n.p+"static/media/negative.bae89287.jpg"},1832:function(e,t,n){e.exports={introduction:"_13uv1yj4euixOaQV1ezSyO",content:"wtaxlQqOHTsVFyUrQEotq",headline:"_1DiGCZhF9odhCzcz2WjOFw",tutorial:"-KjHJ3RlKmsQw4TH6Q4vx",avatar:"_3EOdximXd-i0nQjDNnBqyI",ratio:"_26e91fLQ-jg8f41GgsaIq",image:"_2hnUGZ_SJ9-wNmT82f2Ykh",startScenario:"_6ijL2NXKJlQWqSlBlzFkp",loader:"tyCufYXg4nRWzZ2IXJYCI"}},1833:function(e,t,n){e.exports={description:"_1wER6dVg6wvq9w-nz8ExDf",medium:"_2D5tBFL-cSkXNZVEDplS1Y",video:"mqx3jjzaEwSQK-kTK_Dgu",exit:"ulmiVrnc6ePVKqWDu0T0i",statement:"_1XM64EmbrTN0Z_C0UtEWqm",mood:"_2z8HX-mo2K5KS52AYVA5KA",text:"_3Ste-NthGT2_s7Kzn8Y8xR",loader:"_2jozUuIVTEd_kF9D10DtTG"}},1834:function(e,t,n){e.exports={answers:"_2Toe0ZIbVGGjjiiA5pnSTn",header:"_1kngyMm6Al5tr3X5WDRyJ1",timeToAnswer:"_bDdAmV4bEQrqYmaz-0Vn",timeBar:"_31JjDm4xf1fkMZTHMwN0aZ",time:"_2H5qpYHTmKtRPqZVvlvleY",feedback:"_2cM1lsA5qnNLaL9srwRh4e",evaluation:"_10K_WcmfAUla8qurx0YMM2",choice:"_3JdPK_lirW7Xo2Eg5FbHJL",select:"_23DbDugpmxTGM4iTJu2zzB",loader:"_11ENm77YrHtbjqAkThgCTQ"}},1835:function(e,t,n){e.exports={question:"_20OK5KLK-E15bYr2lK4FaG",content:"_3svsfmowLfwX1nyd3XD2UZ",loader:"m0JxCc1quYwLVEHFFNBa9"}},1836:function(e,t,n){e.exports={entry:"_16WrbLd2fTZHoHAvMHKFIg",result:"_3GAWFF7axgt07669NYEaTF",time:"_10YVq94jNXSPKIRjemIk8Y",statementText:"_3X_-RCRRAb8f_SB0ebXQYp",previousMoodColorBar:"_3El3lIm74ABiXVxCcS7jmg",moodColorBar:"_1gSdPX6890hJdpIpK4NMm7",actualValue:"_5D2XVBRu8VsAFhXnRKynj",reaction:"_36vxuRb61YtQNFp39WuAZ8",answerText:"_2pwwQhVyzS6F08gaVHjhig",feedbackText:"_1seNhXlwlLlUVpeKTUR2hr",loader:"_1M6jU0SSBvdWtV1ZP0cPzH"}},1837:function(e,t,n){e.exports={summary:"_1zE9KNrpdNKg6TYykAZzki",content:"_3uflu6J83MhKfACJTaDX2z",avatar:"_3SjTBv2npGn19yJK-753v2",ratio:"_389z_Ng9sil8lUutzaif-F",image:"_1a3B0EqjM8_W5BuOwIL3xo",header:"_1egM5JWBlWHjtesE2rAbyU",headline:"MzD3Oi6T8XHySmuyAeSZH",summaryScore:"_3-KaiGimRthXn9-Sxz2nav",smallSpan:"_2YyFP2qP5Cb_OVy5iQs8wv",entries:"_1Z0OEMx2NDga09xZu8tmwD",startScenario:"IhNY8vgEIDqRIDMNH0Em8",loader:"_36Pm6atsCfX7k6DzXzqzoc"}},1838:function(e,t,n){e.exports={nextMediaWrapper:"_2ZLFA9Gdha9LuCY-r-S1G9"}},1973:function(e,t,n){"use strict";n.r(t),n.d(t,"scenarioPlugin",(function(){return Tt}));var i=n(9),a=n(0),r=n(640),o=n(641),s=n(206),c=n(88),d=n(39);let l,u;!function(e){e.WIDE="wide",e.NARROW="narrow"}(l||(l={})),function(e){e.Positive="positive",e.Neutral="neutral",e.Negative="negative"}(u||(u={}));const m=e=>void 0!==e&&"scenario"===e.type;let p;!function(e){e.VIMEO="vimeo",e["3Q"]="3Q"}(p||(p={}));const h={positive:{score:1,i18nKey:"plugin.scenario.description.trend.positive"},neutral:{score:.5,i18nKey:"plugin.scenario.description.trend.neutral"},negative:{score:0,i18nKey:"plugin.scenario.description.trend.negative"}},b={title:"",height:1198,width:2130,mediaType:"img"},v={positive:{src:n(1829),...b},neutral:{src:n(1830),...b},negative:{src:n(1831),...b}};var g=n(2),w=n(1),S=n(16);const E=Object(w.createSelector)([S.d],e=>{if(m(e))return e}),f=Object(w.createSelector)([E],e=>null===e||void 0===e?void 0:e.state);var A=n(83),O=n(3),y=n(15),T=n(435),k=n(481),j=n(389);const _=e=>({type:"@@scenario/REDUCE_TIME_TO_ANSWER",payload:{uid:e}}),C=e=>({type:"@@scenario/SET_NEXT_STATEMENT",payload:{uid:e}}),N=e=>({type:"@@scenario/SHOW_SUMMARY",payload:{uid:e}});var R=n(7),I=n(13);const M=e=>!!(null===e||void 0===e?void 0:e.match(/(http|https)?:\/\/(www.|playout.)?3qsdn.com/));var P=n(4);const x={name:"scenario",version:1},D=Object(w.createSelector)([P.k],e=>{var t;return null!==(t=e.scenario)&&void 0!==t?t:{}}),F=Object(w.createSelector)([D,I.c],(e,t)=>e[t]),W=Object(w.createSelector)([F],e=>null===e||void 0===e?void 0:e.statement),B=Object(w.createSelector)([f],e=>(null===e||void 0===e?void 0:e.masteryscore)||.8),K=Object(w.createSelector)([f],e=>null===e||void 0===e?void 0:e.introduction),H=Object(w.createSelector)([f],e=>(null===e||void 0===e?void 0:e.name)||""),U=Object(w.createSelector)([F],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.timeToAnswer)&&void 0!==t?t:-1}),z=Object(w.createSelector)([F],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.isRetryActivated)&&void 0!==t&&t}),V=Object(w.createSelector)([F],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.isSummaryActivated)&&void 0!==t&&t}),L=Object(w.createSelector)([f],e=>!e||"one"!==e.attempts),$=Object(w.createSelector)([f],e=>!!e&&e.feedback.answer),G=Object(w.createSelector)([f],e=>null===e||void 0===e?void 0:e.partner),q=Object(w.createSelector)([G],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:""}),Y=Object(w.createSelector)([f],e=>{var t;return null===(t=null===e||void 0===e?void 0:e.showMood)||void 0===t||t}),Q=Object(w.createSelector)([f],e=>{var t;return null===(t=null===e||void 0===e?void 0:e.showAnswerTime)||void 0===t||t}),X=Object(w.createSelector)([f],e=>null===e||void 0===e?void 0:e.statements),Z=Object(w.createSelector)([f],e=>null===e||void 0===e?void 0:e.answers),J=Object(w.createSelector)([Z],e=>{if(e)return Object.keys(e).map(t=>({id:t,...e[t]}))}),ee=Object(w.createSelector)([X,W],(e,t)=>{if(!e||!t)return;return{...e[t],id:t}}),te=Object(w.createSelector)([Z,ee],(e,t)=>{if(e&&t)return t.responses.map(t=>({id:t,...e[t]})).sort(()=>Math.random()-.5)}),ne=Object(w.createSelector)([te,F],(e,t)=>{if(!t||!e||0===t.selectedAnswers.length)return;const n=t.selectedAnswers[t.selectedAnswers.length-1].answerId;return e.find(e=>e.id===n)}),ie=Object(w.createSelector)([J,F,G],(e,t,n)=>{if(!t||!e)return;if(n&&(0===t.selectedAnswers.length||1===t.selectedAnswers.length&&t.isFeedbackActivated&&!t.isSummaryActivated))return h[n.mood].score;if(t.selectedAnswers.some(e=>""===e.answerId))return 0;const i=t.isFeedbackActivated&&!t.isSummaryActivated?t.selectedAnswers.length-1:t.selectedAnswers.length,a=t.selectedAnswers.slice();t.isFeedbackActivated&&!t.isSummaryActivated&&a.pop();return a.map(t=>((e,t)=>{if(t)return t.find(t=>t.id===e)})(t.answerId,e)).filter(R.a).map(e=>h[e.mood].score).reduce((e,t)=>e+t,0)/i}),ae=Object(w.createSelector)([ie],e=>{var t;if("undefined"!==typeof e)return(t=e)>=2/3?u.Positive:t>=1/3?u.Neutral:u.Negative}),re=(e,t)=>e===u.Positive&&t.defaultMediumPositive?t.defaultMediumPositive.embeddedmediaobject:e===u.Neutral&&t.defaultMediumNeutral?t.defaultMediumNeutral.embeddedmediaobject:e===u.Negative&&t.defaultMediumNegative?t.defaultMediumNegative.embeddedmediaobject:void 0,oe=e=>v[e],se=(e,t,n,i)=>{if(!i&&!n&&e&&e.partner&&e.partner.embeddedmediaobject)return e.partner.embeddedmediaobject;const a=((e,t)=>{if(t)return e===u.Positive&&t.mediumPositive?t.mediumPositive.embeddedmediaobject:e===u.Neutral&&t.mediumNeutral?t.mediumNeutral.embeddedmediaobject:e===u.Negative&&t.mediumNegative?t.mediumNegative.embeddedmediaobject:void 0})(t,i);if(a)return a;const r=e&&re(t,e);return r||oe(t)},ce=Object(w.createSelector)([f,F],(e,t)=>{const n=e&&e.partner.mood||u.Neutral;return void 0!==(i=t)&&"scenario"===i.type&&"undefined"!==typeof t.isSummaryActivated&&t.isSummaryActivated?se(e,n,!0,void 0):se(e,n,!1,void 0);var i}),de=Object(w.createSelector)([f,ae,ee],(e,t,n)=>{if(e&&t&&n)return se(e,t,!1,n)}),le=Object(w.createSelector)([de],e=>{return(null===(t=null===e||void 0===e?void 0:e.src)||void 0===t?void 0:t.match(/(http|https)?:\/\/(www.|player.)?vimeo.com/))?p.VIMEO:M(null===e||void 0===e?void 0:e.src)?p["3Q"]:void 0;var t}),ue=Object(w.createSelector)([le,de],(e,t)=>t&&e===p["3Q"]&&-1===t.src.indexOf("?")?t.src+"?autoplay=true&amp=true":null===t||void 0===t?void 0:t.src),me=(e,t)=>{const n=e&&((e,t)=>e===u.Positive&&t.summaryMediumPositive?t.summaryMediumPositive.embeddedmediaobject:e===u.Neutral&&t.summaryMediumNeutral?t.summaryMediumNeutral.embeddedmediaobject:e===u.Negative&&t.summaryMediumNegative?t.summaryMediumNegative.embeddedmediaobject:void 0)(t,e);if(n)return n;const i=e&&re(t,e);return i||oe(t)},pe=Object(w.createSelector)([f,F,ae],(e,t,n)=>{const i=t&&t.isSummaryActivated&&n?n:e?e.partner.mood:u.Neutral;return me(e,i)}),he=Object(w.createSelector)([F],e=>{if(!e||!e.isSummaryActivated)return;const{selectedAnswers:t}=e,n=t.map(e=>e.time).filter(e=>!!e),i=n.reduce((e,t)=>e+t,0);return 0===n.length?0:Math.round(i/n.length/1e3)}),be=Object(w.createSelector)([f,F,Z,X,G],(e,t,n,i,a)=>{if(!t||!t.isSummaryActivated||!n||!i||!e)return[];const r=a?h[a.mood].score:void 0;let o=0,s=0,c=void 0;return t.selectedAnswers.map(a=>{if(i[t.statement].responses.length>0&&""===a.answerId)return{statementText:i[t.statement].value,selectedAnswerText:"",selectedAnswerMood:"",feedbackText:"",previousScore:s>1?o/(s-1):r,score:0,time:""};const d=n[a.answerId],l=o,u=void 0!==r?r:.5;if(o+=d&&h[d.mood].score?h[d.mood].score:0,s++,0===i[t.statement].responses.length&&void 0===d)return{statementText:i[t.statement].value,selectedAnswerText:"",selectedAnswerMood:"",feedbackText:"",previousScore:s>1?l/(s-1):r,score:s>1?l/(s-1):u,time:"justStatement"};const m=((e,t,n)=>e?t[e.goto].value:t[n].value)(c,i,e.entry);return c=d,{statementText:m,selectedAnswerText:d.value,selectedAnswerMood:d.mood,feedbackText:e.feedback.summary&&d.feedback?d.feedback:"",previousScore:s>1?l/(s-1):r,score:o/s,time:Math.round(a.time/1e3).toString()}})}),ve=Object(w.createSelector)([f,F,X,ee,Z],(e,t,n,i,a)=>{if(!n||!e)return[];if(!t||!i||!a)return[se(e,u.Positive,!1,n[e.entry]),se(e,u.Neutral,!1,n[e.entry]),se(e,u.Negative,!1,n[e.entry])];if(i&&!i.responses)return[me(e,u.Positive),me(e,u.Neutral),me(e,u.Negative)];const r=i.responses.map(e=>a[e]).map(e=>e.goto||"");return[...r.map(t=>se(e,u.Positive,!1,n[t])),...r.map(t=>se(e,u.Neutral,!1,n[t])),...r.map(t=>se(e,u.Negative,!1,n[t]))]}),ge=Object(w.createSelector)([f],e=>{if(e&&e.evaluation&&e.evaluation.feedback)return e.evaluation.feedback}),we=e=>{const t=0,n=140,i=20,a=235,r=175,o=11,s=200,c=0,d=0;if(e<.5){const t=2*e;return`rgb(${Math.round(s+(a-s)*t)}, ${Math.round(c+(r-c)*t)}, ${Math.round(d+(o-c)*t)})`}if(e>.5){const s=2*(e-.5);return`rgb(${Math.round(a+(t-a)*s)}, ${Math.round(r+(n-r)*s)}, ${Math.round(o+(i-o)*s)})`}return`rgb(${a},${r},${o})`},Se=Object(w.createSelector)([F],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.selectedAnswers)&&void 0!==t?t:[]}),Ee=()=>Object(w.createSelector)([ce],e=>{let t="100%",n=void 0,i=void 0;return e.width>e.height?(t=e.width/e.height*100+"%",n=-(e.width/e.height*100-100)/2+"%"):i=-(e.height/e.width*100-100)/2+"%",{left:n,top:i,width:t}});var fe=n(1832),Ae=n.n(fe),Oe=n(76);class ye extends a.PureComponent{get image(){return a.createElement("div",{className:Ae.a.image,style:this.props.partnerImageStyles},a.createElement(T.a,Object.assign({},this.props.partnerImage,{showLoadingIndicator:!1})))}get partner(){const{partner:e}=this.props;if(!e)return;const t=e.headline?`<h4>${e.headline}</h4>`:"",n=e.name?`<b>${e.name}</b><br>`:"";return a.createElement(j.b,{uid:"autogenerated",width:4},a.createElement(y.a,{html:`\n                        ${t}\n                        <p>\n                            ${n}\n                            ${e.text}\n                        </p>\n                    `}))}get avatar(){return a.createElement(j.b,{uid:"autogenerated",width:4},a.createElement("div",{className:Ae.a.avatar},a.createElement("div",{className:Ae.a.ratio},this.image)),this.props.scenarioSpacing===l.WIDE?a.createElement("div",{className:Ae.a.startScenario},a.createElement(A.a,{displayType:Oe.a.PRIMARY,onClick:this.props.startScenario},a.createElement(O.FormattedMessage,{id:"plugin.scenario.question.button.start"}))):null)}get explanation(){if(this.props.introduction)return a.createElement(j.b,{uid:"autogenerated",width:4},a.createElement(y.a,{html:`\n                        <h4>${this.props.introduction.headline}</h4>\n                        <p>${this.props.introduction.text}</p>\n                    `}))}get cells(){return this.props.scenarioSpacing===l.NARROW?a.createElement(a.Fragment,null,this.avatar,this.partner,this.explanation):a.createElement(a.Fragment,null,this.partner,this.avatar,this.explanation)}render(){if(this.props.partner&&this.props.introduction)return a.createElement("div",{className:Ae.a.introduction,"data-spacing":this.props.scenarioSpacing},a.createElement("div",{className:Ae.a.headline},a.createElement("div",{className:Ae.a.content},a.createElement(y.a,{html:`<h3>${this.props.name}</h3>`}))),a.createElement("div",{className:Ae.a.tutorial},a.createElement("div",{className:Ae.a.content},a.createElement(k.b,null,this.cells))),this.props.scenarioSpacing===l.NARROW?a.createElement("div",{className:Ae.a.startScenario},a.createElement(A.a,{displayType:Oe.a.PRIMARY,onClick:this.props.startScenario},a.createElement(O.FormattedMessage,{id:"plugin.scenario.question.button.start"}))):null)}}const Te=Object(g.b)(()=>{const e=Ee();return(t,n)=>({introduction:K(t,n),name:H(t,n),partner:G(t,n),partnerImage:ce(t,n),partnerImageStyles:e(t,n)})},(e,t)=>({startScenario:()=>e({type:"@@scenario/START",payload:{uid:t.uid}})}))(Object(O.injectIntl)(ye));var ke=n(134),je=n(1034),_e=n(383),Ce=n(1833),Ne=n.n(Ce);const Re=a.lazy(()=>Promise.all([n.e(21),n.e(20)]).then(n.bind(null,2059)));class Ie extends a.PureComponent{constructor(e){super(e),this.resizeSubscription=void 0,this.editorRect=null,this.state={isFullscreen:!!this.props.partnerMedium&&["video","stream"].includes(this.props.partnerMedium.mediaType),left:0,top:0,width:"100%",height:"100%"},this.props.partnerMedium&&"img"===this.props.partnerMedium.mediaType&&this.props.startAnswerTime(),this.escFunction=this.escFunction.bind(this),this.onVideoCompleted=this.onVideoCompleted.bind(this),this.addVendorEventHandler=this.addVendorEventHandler.bind(this),this.onMessage=this.onMessage.bind(this)}escFunction(e){"Esc"!==e.key&&"Escape"!==e.key||!this.props.isUidNextInEscapeKeyQueue||this.state.isFullscreen&&(this.props.startAnswerTime(),this.setState({isFullscreen:!1,left:0,top:0,width:"100%",height:"100%"}),this.props.onFullScreenChange(!1))}UNSAFE_componentWillReceiveProps(e){e.resizeObservable&&e.resizeObservable!==this.props.resizeObservable&&(this.unsubscribeResizeObservable(),this.subscribeResizeObservable(e)),e.statementId!==this.props.statementId&&(this.setEditorDimension(),e.partnerMedium&&["video","stream"].includes(e.partnerMedium.mediaType)&&(this.props.onFullScreenChange(!0),this.setState({isFullscreen:!0})),e.partnerMedium&&"img"===e.partnerMedium.mediaType&&this.props.startAnswerTime())}UNSAFE_componentWillMount(){this.subscribeResizeObservable(),this.state.isFullscreen&&this.props.onFullScreenChange(!0)}componentDidMount(){document.addEventListener("keydown",this.escFunction,!1)}componentWillUnmount(){document.removeEventListener("keydown",this.escFunction,!1),this.unsubscribeResizeObservable(),window.removeEventListener("message",this.onMessage)}subscribeResizeObservable(e=this.props){e.resizeObservable&&(this.resizeSubscription=e.resizeObservable.subscribe(e=>{this.editorRect=e,this.setEditorDimension()}))}unsubscribeResizeObservable(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}setEditorDimension(){this.editorRect&&this.setState({left:this.editorRect.left,top:this.editorRect.top,width:this.editorRect.width,height:this.editorRect.height})}onVideoCompleted(){this.state.isFullscreen&&(this.props.startAnswerTime(),this.setState({isFullscreen:!1,left:0,top:0,width:"100%",height:"100%"}),this.props.onFullScreenChange(!1))}get mood(){if(!this.props.mood)return;const e=this.props.intl.formatMessage({id:"plugin.scenario.description.trend"},{mood:this.props.intl.formatMessage({id:(t=this.props.mood,h[t].i18nKey)})});var t;return a.createElement("div",{className:Ne.a.mood},a.createElement(y.a,{html:`<p>${e}</p>`}))}addVendorEventHandler(e){const t=e.target;if(this.props.partnerMediumVendor===p.VIMEO)try{n.e(247).then(n.bind(null,2056)).then(e=>{new e.default(t,{}).on("ended",this.onVideoCompleted)})}catch{}else this.props.partnerMediumVendor===p["3Q"]&&window.addEventListener("message",this.onMessage)}onMessage(e){var t,n;M(e.origin)&&"complete"===(null===(t=e.data)||void 0===t?void 0:t.data)&&"true"===(null===(n=e.data)||void 0===n?void 0:n.value)&&this.onVideoCompleted()}get videoOrStream(){if(this.props.partnerMedium){if("video"===this.props.partnerMedium.mediaType)return a.createElement(a.Suspense,{fallback:null},a.createElement(Re,Object.assign({key:this.props.statementId},this.props.partnerMedium,{controls:!1,autoPlay:!0,onInteractionComplete:this.onVideoCompleted})));if(this.props.partnerMediumVendorSrc)return a.createElement(je.a,Object.assign({key:this.props.statementId},this.props.partnerMedium,{src:this.props.partnerMediumVendorSrc,onLoad:this.addVendorEventHandler}))}}get closeButton(){if(this.state.isFullscreen)return a.createElement("a",{className:Ne.a.exit,onClick:this.onVideoCompleted})}get medium(){if(!this.props.partnerMedium||!["img","video","stream"].includes(this.props.partnerMedium.mediaType))return;if("img"===this.props.partnerMedium.mediaType)return a.createElement(T.a,this.props.partnerMedium);let e={};return this.state.isFullscreen&&(e={left:this.state.left,top:this.state.top,width:this.state.width,height:this.state.height}),a.createElement("div",{className:Ne.a.video,style:e,"data-is-video-playing":this.state.isFullscreen},this.videoOrStream,this.closeButton)}get statement(){if(!this.state.isFullscreen)return a.createElement("div",{className:Ne.a.statement},this.mood,a.createElement("div",{className:Ne.a.text},a.createElement(y.a,{html:`<p>${this.props.partnerName}${this.props.statementValue}</p>`})))}render(){return a.createElement("div",{className:Ne.a.description,"data-mood":this.props.mood,"data-spacing":this.props.scenarioSpacing},a.createElement("div",{className:Ne.a.medium},this.medium),this.statement)}}const Me=Object(g.b)((e,t)=>{const n=G(e,t),i=Y(e,t),a=ee(e,t);return{mood:i?ae(e,t):void 0,partnerMedium:de(e,t),partnerMediumVendor:le(e,t),partnerMediumVendorSrc:ue(e,t),partnerName:n&&n.name?`<b>${n.name}</b><br>`:"",statementId:a&&a.id,statementValue:a&&a.value}})(Object(O.injectIntl)(Object(_e.a)(Object(ke.a)(Ie))));var Pe=n(1834),xe=n.n(Pe);class De extends a.PureComponent{constructor(e){super(e),this.state={answerTime:this.props.remainingAnswerTime,noAnimationTimeBar:!1,selectedAnswer:void 0},this.onAnswerClick=this.onAnswerClick.bind(this)}componentDidUpdate(e){e.statementId!==this.props.statementId?this.setState({answerTime:this.props.remainingAnswerTime,noAnimationTimeBar:!0,selectedAnswer:void 0}):this.setState({noAnimationTimeBar:!1})}onAnswerClick(e){e.feedback&&this.props.isShowFeedbackActivated?this.props.onAnswerClick(e.id):(this.setState({selectedAnswer:e.id}),setTimeout(()=>{this.props.onAnswerClick(e.id)},300))}getAnswer(e){return a.createElement("div",{key:"answer-"+e.id},a.createElement("div",{className:xe.a.choice,onClick:this.props.selectedAnswer||this.state.selectedAnswer?void 0:()=>this.onAnswerClick(e),"data-answer-checked":!!this.props.selectedAnswer||!!this.state.selectedAnswer,"data-selected":this.props.selectedAnswer&&this.props.selectedAnswer.id===e.id||this.state.selectedAnswer===e.id},a.createElement(y.a,{html:`<p>${e.value}</p>`})),this.props.selectedAnswer&&this.props.selectedAnswer.id===e.id&&this.props.isShowFeedbackActivated?this.feedback:void 0)}get timeToAnswer(){if(-1!==this.props.remainingAnswerTime)return a.createElement("div",{className:xe.a.timeToAnswer},Math.ceil(this.props.remainingAnswerTime)+1," ",this.props.intl.formatMessage({id:"plugin.scenario.question.answers.time"}))}get timeBar(){if(-1===this.props.remainingAnswerTime)return;const e=100-this.props.remainingAnswerTime/this.state.answerTime*100,t={width:e+"%"};return a.createElement("div",{className:xe.a.timeBar},a.createElement("div",{className:xe.a.time,"data-hurry":e>80,"data-no-animation":this.state.noAnimationTimeBar,style:t}))}get answers(){if(this.props.answers)return this.props.answers.map(e=>this.getAnswer(e))}get feedback(){if(!this.props.selectedAnswer||!this.props.selectedAnswer.feedback)return;const{mood:e,feedback:t}=this.props.selectedAnswer;return a.createElement(a.Fragment,null,a.createElement("div",{className:xe.a.feedback,"data-mood":e},a.createElement(y.a,{html:"<p>"+t+"</p>"}),this.continueButton))}get continueButton(){return a.createElement(A.a,{displayType:Oe.a.PRIMARY,onClick:this.props.onFeedbackClick},a.createElement(O.FormattedMessage,{id:"plugin.scenario.question.button.continue"}))}get content(){return this.props.answers&&0!==this.props.answers.length?a.createElement(a.Fragment,null,a.createElement("div",{className:xe.a.header},a.createElement("div",{className:xe.a.title},a.createElement(y.a,{html:`<h5>${this.props.intl.formatMessage({id:"plugin.scenario.question.answers.title"})}</h5>`})),this.timeToAnswer),this.timeBar,a.createElement("div",null,this.answers)):a.createElement("div",{className:xe.a.evaluation},a.createElement(y.a,{html:`<h5>${this.props.intl.formatMessage({id:"plugin.scenario.question.evaluation.title"})}</h5>`}),a.createElement(A.a,{displayType:Oe.a.PRIMARY,onClick:this.props.onNoAnswerQuestionClick},a.createElement(O.FormattedMessage,{id:"plugin.scenario.question.button.summary"})))}render(){return a.createElement("div",{className:xe.a.answers,"data-spacing":this.props.scenarioSpacing},this.content)}}const Fe=Object(g.b)((e,t)=>{var n;return{answers:te(e,t),isShowFeedbackActivated:$(e,t),statementId:null===(n=ee(e,t))||void 0===n?void 0:n.id,selectedAnswer:ne(e,t),remainingAnswerTime:U(e,t)}},(e,t)=>({onFeedbackClick:()=>e(C(t.uid)),onNoAnswerQuestionClick:()=>e({type:"@@scenario/NO_ANSWER_QUESTION",payload:{uid:t.uid}}),reduceTimeToAnswer:()=>e(_(t.uid))}))(Object(O.injectIntl)(De));var We=n(1835),Be=n.n(We);class Ke extends a.PureComponent{constructor(e){super(e),this.reduceTimeToAnswerInterval=void 0,this.startAnswerTime=this.startAnswerTime.bind(this),this.onAnswerClick=this.onAnswerClick.bind(this)}componentWillUnmount(){this.stopReduceTimeToAnswerInterval()}startAnswerTime(){this.setState({startTime:Date.now()}),this.props.isTimeLeft&&(this.stopReduceTimeToAnswerInterval(),this.startReduceTimeToAnswerInterval())}startReduceTimeToAnswerInterval(){this.props.reduceTimeToAnswer(),this.reduceTimeToAnswerInterval=window.setInterval(this.props.reduceTimeToAnswer,1e3)}stopReduceTimeToAnswerInterval(){void 0!==this.reduceTimeToAnswerInterval&&(window.clearInterval(this.reduceTimeToAnswerInterval),this.reduceTimeToAnswerInterval=void 0)}onAnswerClick(e){this.stopReduceTimeToAnswerInterval(),this.props.onAnswerClick(e,Date.now()-this.state.startTime)}render(){return this.props.doesCurrentStatementExist?a.createElement("div",{className:Be.a.question,"data-spacing":this.props.scenarioSpacing},a.createElement("div",{className:Be.a.content},a.createElement(k.b,null,a.createElement(j.b,{uid:"autogenerated",width:5},a.createElement(Me,{key:"descriptionRenderer",uid:this.props.uid,startAnswerTime:this.startAnswerTime,scenarioSpacing:this.props.scenarioSpacing,onFullScreenChange:this.props.onFullScreenChange})),a.createElement(j.b,{uid:"autogenerated",width:7},a.createElement(Fe,{key:"answersRenderer",uid:this.props.uid,onAnswerClick:this.onAnswerClick,scenarioSpacing:this.props.scenarioSpacing}))))):null}}const He=Object(g.b)((e,t)=>({doesCurrentStatementExist:void 0!==ee(e,t),isTimeLeft:U(e,t)>-1}),(e,t)=>({onAnswerClick:(n,i)=>e(((e,t,n)=>({type:"@@scenario/ANSWER_QUESTION",payload:{uid:e,answerId:t,time:n}}))(t.uid,n,i)),onFeedbackClick:()=>e(C(t.uid)),reduceTimeToAnswer:()=>e(_(t.uid))}))(Ke),Ue=(e,t)=>t.summaryEntry;var ze=n(1836),Ve=n.n(ze);class Le extends a.PureComponent{get moodValue(){if("justStatement"!==this.props.relativeTime)return a.createElement("div",{className:Ve.a.actualValue},this.props.scorePercentage,"%")}get yourReaction(){if(null===this.props.answerText)return;const{color:e,intl:t,relativeTime:n,showAnswerTime:i}=this.props;return i?0===n?a.createElement("div",{className:Ve.a.reaction,"data-color":e},t.formatMessage({id:"plugin.scenario.summary.summaryEntry.noAnswerSelected"})):"justStatement"!==n?a.createElement("div",{className:Ve.a.reaction,"data-color":e},t.formatMessage({id:"plugin.scenario.summary.summaryEntry.answerWithTime"},{time:n})):void 0:a.createElement("div",{className:Ve.a.reaction,"data-color":e},t.formatMessage({id:"plugin.scenario.summary.summaryEntry.answer"}))}render(){const{answerText:e,feedbackText:t,moodStyles:n,previousMoodStyles:i,statementText:r}=this.props;return a.createElement("div",{className:Ve.a.entry},a.createElement("div",{className:Ve.a.result},r,a.createElement("div",{className:Ve.a.previousMoodColorBar,style:i}),a.createElement("div",{className:Ve.a.moodColorBar,style:n}),this.moodValue,this.yourReaction,e,t))}}const $e=Object(O.injectIntl)(Object(g.b)(()=>{const e=Object(w.createSelector)([Ue],e=>({background:""+we(e.score)})),t=Object(w.createSelector)([Ue],e=>{const{selectedAnswerMood:t}=e;return"negative"===t?"negative":"neutral"===t?"neutral":"positive"}),n=Object(w.createSelector)([Ue],e=>{const t=void 0!==e.previousScore?e.previousScore:e.score;return{background:""+we(t)}}),i=Object(w.createSelector)([Ue],e=>Math.round(100*e.score));return(r,o)=>{const{feedbackText:s,selectedAnswerText:c,statementText:d,time:l}=o.summaryEntry;let u=null;""!==c&&(u=a.createElement("div",{className:Ve.a.answerText},a.createElement(y.a,{html:""+c})));let m=null;void 0!==s&&""!==s&&(m=a.createElement("div",{className:Ve.a.feedbackText},a.createElement(y.a,{html:""+o.intl.formatMessage({id:"plugin.scenario.summary.summaryEntry.feedback"})}),a.createElement(y.a,{html:""+s})));let p=null;if(""!==d){const e=`<b>${q(r,o)}:</b>`;p=a.createElement("div",{className:Ve.a.statementText},a.createElement(y.a,{html:`${e} ${d}`}))}return{answerText:u,color:t(r,o),feedbackText:m,moodStyles:e(r,o),previousMoodStyles:n(r,o),relativeTime:l||0,scorePercentage:i(r,o),showAnswerTime:Q(r,o),statementText:p}}})(Le));var Ge=n(1837),qe=n.n(Ge);class Ye extends a.PureComponent{get entries(){if(this.props.summaryEntries)return this.props.summaryEntries.map((e,t)=>a.createElement($e,{key:"summaryEntry-"+t,uid:this.props.uid,summaryEntry:e}))}get retryButton(){if(this.props.isRestartScenarioAvailable)return a.createElement("div",{className:qe.a.startScenario},a.createElement(A.a,{displayType:Oe.a.PRIMARY,onClick:this.props.isRestartScenarioActivated?this.props.scenarioReset:()=>!1,disabled:!this.props.isRestartScenarioActivated},a.createElement(O.FormattedMessage,{id:"plugin.scenario.summary.button.retry"})))}get mood(){if(void 0===this.props.summaryEntries)return"";const e=this.props.summaryEntries[this.props.summaryEntries.length-1].score;return!0===!!(e&&e>=this.props.masteryScore)?this.props.evaluationFeedback&&this.props.evaluationFeedback.positive&&""!==this.props.evaluationFeedback.positive?this.props.evaluationFeedback.positive:this.props.intl.formatMessage({id:"plugin.scenario.summary.text.mood.positive"}):this.props.evaluationFeedback&&this.props.evaluationFeedback.negative&&""!==this.props.evaluationFeedback.negative?this.props.evaluationFeedback.negative+" "+this.props.intl.formatMessage({id:"plugin.scenario.summary.text.mood.negative.percentage"},{percent:Math.round(100*this.props.masteryScore)}):this.props.intl.formatMessage({id:"plugin.scenario.summary.text.mood.negative"},{percent:Math.round(100*this.props.masteryScore)})}get answerTime(){return this.props.showAnswerTime?this.props.intl.formatMessage({id:"plugin.scenario.summary.text.time"},{time:this.props.relativeTime}):""}get avatar(){if(void 0===this.props.summaryEntries)return null;const e=this.props.summaryEntries[0].previousScore,t=this.props.summaryEntries[0].score,n={borderColor:we(void 0!==e?e:t)};return a.createElement("div",{style:n,className:qe.a.avatar},a.createElement("div",{className:qe.a.ratio},a.createElement("div",{className:qe.a.image,style:this.props.partnerImageStyles},a.createElement(T.a,Object.assign({},this.props.partnerImage,{showLoadingIndicator:!1})))))}get summaryAvatar(){if(void 0===this.props.summaryEntries)return null;const e=this.props.summaryEntries[this.props.summaryEntries.length-1].score,t={borderColor:we(e)};return a.createElement("div",{style:t,className:qe.a.avatar},a.createElement("div",{className:qe.a.ratio},a.createElement("div",{className:qe.a.image,style:this.props.summaryPartnerImageStyles},a.createElement(T.a,Object.assign({},this.props.summaryPartnerImage,{showLoadingIndicator:!1})))))}render(){if(void 0===this.props.summaryEntries)return null;const e=this.props.summaryEntries[this.props.summaryEntries.length-1].score,t=Math.round(100*e);return a.createElement("div",{className:qe.a.summary,"data-spacing":this.props.scenarioSpacing},a.createElement("div",{className:qe.a.header},a.createElement("div",{className:qe.a.content},a.createElement("div",{className:qe.a.headline},a.createElement("div",{className:qe.a.summaryScore},t,a.createElement("span",{className:qe.a.smallSpan},"%")),a.createElement(y.a,{html:`\n                                    <h3>${this.props.intl.formatMessage({id:"plugin.scenario.summary.title"})}</h3>\n                                    <h5>\n                                        ${this.mood}<br/>\n                                        ${this.answerTime}\n                                    </h5>\n                                `})))),a.createElement("div",{className:qe.a.entries},a.createElement("div",{className:qe.a.content},this.avatar,this.entries,this.summaryAvatar,this.retryButton)))}}const Qe=Object(g.b)(()=>{const e=Ee(),t=Object(w.createSelector)([pe],e=>{let t="100%",n=void 0,i=void 0;return e.width>e.height?(t=e.width/e.height*100+"%",n=-(e.width/e.height*100-100)/2+"%"):i=-(e.height/e.width*100-100)/2+"%",{left:n,top:i,width:t}});return(n,i)=>({evaluationFeedback:ge(n,i),isRestartScenarioActivated:z(n,i),isRestartScenarioAvailable:L(n,i),masteryScore:B(n,i),partnerImage:ce(n,i),partnerImageStyles:e(n,i),relativeTime:he(n,i),showAnswerTime:Q(n,i),summaryEntries:be(n,i),summaryPartnerImage:pe(n,i),summaryPartnerImageStyles:t(n,i)})},(e,t)=>({scenarioReset:()=>e({type:"@@scenario/RESET",payload:{uid:t.uid}})}))(Object(O.injectIntl)(Ye));var Xe=n(1838),Ze=n.n(Xe);const Je=a.lazy(()=>Promise.all([n.e(21),n.e(20)]).then(n.bind(null,2059)));class et extends a.PureComponent{get nextMedia(){let e=0;return this.props.media.map(t=>t&&"img"===t.mediaType?a.createElement(T.a,Object.assign({key:"medium_"+e++},t)):t&&"video"===t.mediaType?a.createElement(a.Suspense,{fallback:null},a.createElement(Je,Object.assign({key:"medium_"+e++},t))):void 0)}render(){return a.createElement("div",{className:Ze.a.nextMediaWrapper},this.nextMedia)}}var tt=n(118),nt=n(8);const it=(e,t)=>({type:"@@packageApi/EMIT_EVENT",payload:{key:e,data:t}});var at=n(1722);class rt extends a.PureComponent{constructor(e){super(e),this.container=null,this.scenarioResizeSubscription=void 0,this.state={scenarioSpacing:l.WIDE,isFullScreenActivated:!1},this.onFullScreenChange=this.onFullScreenChange.bind(this)}componentDidUpdate(e){(this.props.showSummary&&!e.showSummary||!e.currentStatement&&this.props.currentStatement||e.currentStatement&&!this.props.currentStatement||e.currentStatement&&this.props.currentStatement&&this.props.currentStatement.id!==e.currentStatement.id)&&this.props.scrollToSelf()}componentWillUnmount(){this.unsubscribeScenarioResizeObservable()}onFullScreenChange(e){this.setState({isFullScreenActivated:e}),this.container&&this.setScenarioResize(this.container.getBoundingClientRect())}setScenarioResize(e){const t=this.state.isFullScreenActivated?540:e.height;this.props.scenarioResize(t)}createScenarioResizeObservable(e){this.scenarioResizeSubscription=Object(d.a)(e).pipe(Object(r.a)(e),Object(o.a)(66),Object(s.a)(e=>e.getBoundingClientRect())).subscribe(e=>{this.setScenarioDimension(e)})}unsubscribeScenarioResizeObservable(){this.scenarioResizeSubscription&&this.scenarioResizeSubscription.unsubscribe()}setScenarioDimension(e){this.setScenarioResize(e);const{width:t}=e;this.setState({scenarioSpacing:t>540?l.WIDE:l.NARROW})}get question(){if(this.props.currentStatement)return a.createElement(He,{uid:this.props.uid,scenarioSpacing:this.state.scenarioSpacing,onFullScreenChange:this.onFullScreenChange})}get content(){return this.props.currentStatement?this.props.showSummary?a.createElement(Qe,{uid:this.props.uid,scenarioSpacing:this.state.scenarioSpacing}):this.question:a.createElement(Te,{uid:this.props.uid,scenarioSpacing:this.state.scenarioSpacing})}render(){return this.props.isScenarioLoaded?a.createElement("div",Object.assign({ref:e=>{e&&!this.scenarioResizeSubscription&&this.createScenarioResizeObservable(e),this.container=e}},this.props.editableProps),this.content,a.createElement(et,{media:this.props.nextMedia})):a.createElement(tt.a,null)}}const ot=Object(c.a)()(Object(g.b)((e,t)=>{const n=E(e,{uid:t.uid});return n&&"string"===typeof n.state?{}:{currentStatement:ee(e,t),showSummary:V(e,t),nextMedia:ve(e,t),isScenarioLoaded:void 0!==K(e,t)}},(e,t)=>({scenarioResize:t=>{const n=Math.ceil(t);return Object(at.setHeight)(n),e(it("medium.resized",{height:n}))},scrollToSelf:()=>e(Object(nt.ab)(t.uid))}))(rt));var st=n(1097),ct=n(1704),dt=n(1577),lt=n(888),ut=n(386),mt=n(605),pt=n(23),ht=n(95),bt=n(77);let vt;const gt=[e=>e.pipe(Object(st.a)(ht.a),Object(s.a)(e=>Object.values(e.payload.plugins).find(m)),Object(dt.a)(R.a),Object(ct.a)(e=>{const t=window.parent;return bt.a.create(n=>{!vt&&t&&t.getApi&&t.getApi(window,"V1",t=>{vt=t,vt.on("quiz.deactivateQuestion",()=>{n.next({type:"@@scenario/DEACTIVATE_RETRY_BUTTON",payload:{uid:e.uid}})}),vt.on("quiz.activateQuestion",()=>{n.next({type:"@@scenario/ACTIVATE_RETRY_BUTTON",payload:{uid:e.uid}})}),document.body.style.overflow="hidden"})})})),e=>e.pipe(Object(st.a)("@@packageApi/EMIT_EVENT"),Object(ct.a)(({payload:e})=>vt&&e.data?(vt.emit(e.key,e.data),[]):[])),(e,t)=>e.pipe(Object(st.a)("@@scenario/SHOW_SUMMARY"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>f(t.value,{uid:e.uid})),Object(lt.a)(n=>{const i=ie(t.value,{uid:e.uid});return vt&&"undefined"!==typeof i&&n?[it("question.answered",{answer:i,isCorrect:i>=(n.masteryscore?n.masteryscore:.8)})]:[]})))),e=>e.pipe(Object(st.a)("@@scenario/RESET"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>it("question.retried")))))];var wt=n(146),St=n(73),Et=n(5),ft=n(168),At=n(437);const Ot=function(e,t,n,i){const a=[],r=F(e.value,{uid:t});return r&&a.push(Object(pt.t)(t,"scenario",{selectedAnswers:[...r.selectedAnswers,{answerId:n,time:i}]})),a},yt=[(e,t)=>e.pipe(Object(st.a)("@@scenario/START"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>E(t.value,{uid:e.uid})),Object(s.a)(e=>e?e.state:void 0),Object(dt.a)(R.a),Object(s.a)(t=>({[x.name]:{[e.uid]:{uid:e.uid,type:x.name,statement:t.entry,timeToAnswer:t.statements[t.entry].time,isRetryActivated:!0,selectedAnswers:[]}}})),Object(s.a)(pt.l)))),(e,t)=>e.pipe(Object(st.a)("@@scenario/ANSWER_QUESTION"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>f(t.value,{uid:e.uid})),Object(dt.a)(R.a),Object(lt.a)(n=>{const i=n.answers[e.answerId],a=Ot(t,e.uid,e.answerId,e.time);return n.feedback.answer&&i.feedback?[...a,(r=e.uid,{type:"@@scenario/SHOW_FEEDBACK",payload:{uid:r}})]:[...a,C(e.uid)];var r})))),(e,t)=>e.pipe(Object(st.a)("@@scenario/NO_ANSWER_QUESTION"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>f(t.value,{uid:e.uid})),Object(dt.a)(R.a),Object(lt.a)(()=>[...Ot(t,e.uid,void 0,void 0),N(e.uid)])))),e=>e.pipe(Object(st.a)("@@scenario/SHOW_FEEDBACK"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>Object(pt.t)(e.uid,"scenario",{isFeedbackActivated:!0}))))),e=>e.pipe(Object(st.a)("@@scenario/SHOW_SUMMARY"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>Object(pt.t)(e.uid,"scenario",{isSummaryActivated:!0}))))),(e,t)=>e.pipe(Object(st.a)("@@scenario/SET_NEXT_STATEMENT"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>E(t.value,{uid:e.uid})),Object(s.a)(e=>e?e.state:void 0),Object(dt.a)(R.a),Object(s.a)(n=>{const i=Se(t.value,e),a=i[i.length-1],r=a&&n.answers[a.answerId].goto;return r?Object(pt.t)(e.uid,"scenario",{isFeedbackActivated:!1,timeToAnswer:n.statements[r].time,statement:r}):N(e.uid)})))),e=>e.pipe(Object(st.a)("@@scenario/RESET"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>Object(pt.t)(e.uid,"scenario",void 0))))),(e,t)=>e.pipe(Object(st.a)("@@scenario/REDUCE_TIME_TO_ANSWER"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>F(t.value,e)),Object(dt.a)(R.a),Object(lt.a)(n=>{if(n.timeToAnswer>0)return[Object(pt.t)(e.uid,"scenario",{timeToAnswer:n.timeToAnswer-1})];return[...Ot(t,e.uid,"",-1),N(e.uid)]})))),e=>e.pipe(Object(st.a)("@@scenario/ACTIVATE_RETRY_BUTTON"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>Object(pt.t)(e.uid,"scenario",{isRetryActivated:!0}))))),e=>e.pipe(Object(st.a)("@@scenario/DEACTIVATE_RETRY_BUTTON"),Object(ct.a)(({payload:e})=>Object(mt.a)(e).pipe(Object(s.a)(()=>Object(pt.t)(e.uid,"scenario",{isRetryActivated:!1}))))),(e,t)=>e.pipe(Object(st.a)(St.c),Object(dt.a)(()=>Object(ut.a)(Object(Et.ab)(t.value))),Object(s.a)(()=>window.frameElement&&window.frameElement.getAttribute("data-conversation")),Object(dt.a)(R.a),Object(dt.a)(At.a),Object(dt.a)(e=>""!==e),Object(s.a)(e=>{const n=E(t.value,{uid:"scenario_CWbUo3Ulb8kHvX8262"});if(n)return n.state=JSON.parse(e),n}),Object(dt.a)(R.a),Object(s.a)(e=>Object(ht.g)({scenario_CWbUo3Ulb8kHvX8262:e}))),(e,t)=>e.pipe(Object(st.a)(St.c),Object(dt.a)(()=>Object(ut.a)(Object(Et.ab)(t.value))),Object(s.a)(()=>window.frameElement&&window.frameElement.getAttribute("data-locale")),Object(dt.a)(R.a),Object(dt.a)(At.a),Object(dt.a)(e=>""!==e),Object(dt.a)(e=>Object(ft.b)(t.value)!==e),Object(ct.a)(e=>[Object(wt.g)(e),Object(nt.mb)(e)])),...gt],Tt={...x,category:i.c.COMPOSITE_FULLSIZE,renderer:ot,epics:yt}},2027:function(e,t,n){"use strict";n.r(t),n.d(t,"scenario",(function(){return i}));const i=n(1973).scenarioPlugin}}]);
//# sourceMappingURL=https://sourcemaps.intern.chemmedia.de/rre-view-openKnowledgeworker/23.7.5296/scenario.0eff4df4.chunk.js.map