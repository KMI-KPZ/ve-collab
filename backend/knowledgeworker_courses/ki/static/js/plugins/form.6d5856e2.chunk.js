(this["webpackJsonprre-openKnowledgeworker"]=this["webpackJsonprre-openKnowledgeworker"]||[]).push([[160],{1718:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var r=o(1),i=o(4);const n=t=>Object(r.createSelector)([i.a],e=>{var o,r;return null!==(o=null===(r=e[t])||void 0===r?void 0:r.isLoaded)&&void 0!==o&&o})},1719:function(t,e,o){"use strict";function r(t,e){let o=0;const r=(...r)=>{if(o++,t(...r))return e()(...r)};return r.recomputations=()=>o,r.resetRecomputations=()=>o=0,r.dependencies=[t],r.resultFunc=e(),r}o.d(e,"a",(function(){return r}))},1721:function(t,e,o){"use strict";o.d(e,"b",(function(){return r})),o.d(e,"a",(function(){return i}));const r=()=>o.e(191).then(o.bind(null,1744)).then(t=>t.formGenericChildren),i="formGenericChildren"},1724:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));const r="@@form/SUBMIT"},1847:function(t,e,o){t.exports={form:"q5cEJmd_kEB2tryH4_Xb_",dataProtection:"_3fi8AB2De5GMp3ENHRNneh",buttons:"_3L6KwBJ_-ggF3yHJoLJ9uR",loader:"_2qw9y0gMvHVKaa6HJE9qH3"}},1981:function(t,e,o){"use strict";o.r(e),o.d(e,"formPlugin",(function(){return X}));var r=o(9),i=o(1721),n=o(871),a=o(0),c=o(2),s=o(3),l=o(88),d=o(15),u=o(83),p=o(1847),h=o.n(p),m=o(76);class b extends a.PureComponent{constructor(t){super(t),this.formRef=void 0,this.onSubmit=this.onSubmit.bind(this)}onSubmit(t){this.props.isFormValid&&this.formRef&&this.props.action?this.props.onSubmit():t.preventDefault()}get dataProtection(){if(this.props.children&&this.props.children.dataProtection)return a.createElement("div",{className:h.a.dataProtection},this.props.children.dataProtection)}render(){return a.createElement("div",{className:h.a.form},a.createElement("form",{action:this.props.action,method:"post",target:"_blank",onSubmit:this.onSubmit,ref:t=>this.formRef=t},this.props.children&&this.props.children.formChildren,this.dataProtection,a.createElement("div",{className:h.a.buttons},a.createElement(u.a,{type:"submit",displayType:m.a.PRIMARY,disabled:!this.props.isFormValid},a.createElement(d.a,{html:this.props.submitButtonLabel})))))}}var f=o(1),C=o(1719),P=o(7),k=o(1718),v=o(46),D=o(5),O=o(6),g=o(13),S=o(4),j=o(49);const y={name:"form",version:1},E={},w=t=>void 0!==t&&"form"===t.type,T=Object(f.createSelector)([S.k],t=>{var e;return null!==(e=t.form)&&void 0!==e?e:{}}),L=Object(f.createSelector)([T,g.c],(t,e)=>t[e]),_=()=>{const t=Object(v.f)(w);return Object(f.createSelector)([t],t=>{if(t&&t.action)return t.action})},B=()=>{const t=Object(v.f)(w);return Object(f.createSelector)([D.k,t],(t,e)=>!!t&&(!e||!1!==e.showDataProtectionLink))},F=()=>Object(f.createSelector)([L],t=>!(!t||!t.isDataProtectionChecked)),I=Object(k.a)(i.a),V=Object(C.a)(I,()=>{var t;return null===(t=E.formGenericChildren)||void 0===t?void 0:t.selectors.getFormGenericChildrenViewStore}),G=()=>{const t=(()=>{const t=Object(v.f)(w);return Object(f.createSelector)([t],t=>{if(t&&t.submitButtonLabel)return t.submitButtonLabel.html})})();return Object(f.createSelector)([t,g.a],(t,e)=>t||e.formatMessage({id:"plugin.form.submitButton"}))};var R=o(69),A=o(1724);const H=(t,e)=>({type:"@@form/DATA_PROTECTION_SET_IS_CHECKED",payload:{uid:t,isChecked:e}});class M extends a.PureComponent{constructor(t){super(t),this.onSetDataProtectionChecked=this.onSetDataProtectionChecked.bind(this),this.onDataProtectionClick=this.onDataProtectionClick.bind(this)}get children(){const{children:t,editableData:e}=this.props;return t&&a.Children.count(t)>0?t:e?e.placeholder:void 0}onSetDataProtectionChecked(){this.props.setIsDataProtectionChecked(!this.props.isDataProtectionChecked)}onDataProtectionClick(t){t.preventDefault(),t.stopPropagation(),window.open(this.props.dataProtectionLink,"_blank")}get label(){return a.createElement(s.FormattedMessage,{id:"plugin.form.dataProtection",values:{dataProtectionPolicy:this.dataProtectionLink}})}get dataProtectionLink(){return a.createElement("a",{onClick:this.onDataProtectionClick,style:{color:this.props.actionColor}},a.createElement(s.FormattedMessage,{id:"plugin.form.dataProtectionLink"}))}get dataProtection(){var t,e;if(!this.props.showDataProtectionLink)return;const o=null===(t=E.formGenericChildren)||void 0===t?void 0:t.components.FormGenericChildren,r=null===(e=E.formGenericChildren)||void 0===e?void 0:e.components.FormToggle;if(!o||!r)return;const i=this.props.uid+"-data-protection";return a.createElement(o,{id:i,label:this.label,isOptional:!1,textColor:this.props.textColor,showInline:!0,onClick:this.onSetDataProtectionChecked},a.createElement(r,{id:i,name:"fields[dataProtection]",setIsActive:this.onSetDataProtectionChecked,isActive:this.props.isDataProtectionChecked,textColor:this.props.textColor,actionColor:this.props.actionColor,backgroundColor:this.props.backgroundColor}))}render(){const{editableProps:t,action:e,submitButtonLabel:o,isFormValid:r,submitForm:i,actionColor:n}=this.props;return a.createElement("div",t,a.createElement(b,{action:e,submitButtonLabel:o,isFormValid:r,onSubmit:i,actionColor:n},{formChildren:this.children,dataProtection:this.dataProtection}))}}const x=Object(l.a)()(Object(s.injectIntl)(Object(c.b)(()=>{const t=G(),e=_(),o=(()=>{const t=_(),e=Object(O.V)(),o=B(),r=F();return Object(f.createSelector)([e,V,t,o,r],(t,e,o,r,i)=>{var n;if(!o||0===t.length)return!1;if(r&&!i)return!1;const a=null===(n=E.formGenericChildren)||void 0===n?void 0:n.typeGuards.isFormGenericChildrenView;if(!a)return!1;return 0===t.filter(P.a).map(t=>e&&Object(j.h)(e,{uid:t.uid})).filter(a).filter(t=>!1===t.isValid).length})})(),r=F(),i=B();return(n,a)=>({submitButtonLabel:t(n,a),action:e(n,a),isFormValid:o(n,a),isDataProtectionChecked:r(n,a),dataProtectionLink:Object(D.k)(n),showDataProtectionLink:i(n,a)})},(t,e)=>({submitForm:()=>window.setTimeout(()=>{return t((o=e.uid,{type:A.a,payload:{uid:o}}));var o},300),setIsDataProtectionChecked:o=>t(H(e.uid,o))}))(Object(R.a)(M))));var J=o(1097),N=o(206),K=o(23);const q=[t=>t.pipe(Object(J.a)(A.a),Object(N.a)(({payload:t})=>Object(K.o)("form",t.uid))),t=>t.pipe(Object(J.a)(A.a),Object(N.a)(({payload:t})=>H(t.uid,!1)))],U={interactionComplete:!1,isDataProtectionChecked:!1},X={...y,includeSpaceToTop:!0,viewParams:{initialViewParams:()=>U,suspendDataViewParams:t=>({...t.interactionComplete&&{interactionComplete:t.interactionComplete},...t.isDataProtectionChecked&&{isDataProtectionChecked:t.isDataProtectionChecked}}),reducedSuspendDataViewParams:()=>({}),minifyMap:()=>({interactionComplete:{key:"a",valueDataType:r.a.Boolean},isDataProtectionChecked:{key:"b",valueDataType:r.a.Boolean}})},category:r.c.BASIC,includeInProgressTrackingByDefault:()=>!1,epics:q,viewReducer:(t,e)=>{switch(e.type){case"@@form/DATA_PROTECTION_SET_IS_CHECKED":{const{payload:o}=e;return{...t,[o.uid]:{...t[o.uid],isDataProtectionChecked:o.isChecked}}}default:return t}},isScrollTarget:!0,renderer:x,isInteractive:!0,loadDependencies:()=>Promise.all([Object(i.b)(),Object(n.b)()]).then(([t,e])=>(E.formGenericChildren=t,E.formInput=e,{loadedChunks:[i.a,n.a]}))}},2033:function(t,e,o){"use strict";o.r(e),o.d(e,"form",(function(){return r}));const r=o(1981).formPlugin}}]);
//# sourceMappingURL=https://sourcemaps.intern.chemmedia.de/rre-view-openKnowledgeworker/23.7.5296/form.6d5856e2.chunk.js.map